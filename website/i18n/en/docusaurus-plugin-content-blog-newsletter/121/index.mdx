---
slug: /121
title: "This Week In React #121: Next.js, experimental_cache, CSS-in-JS, Qwikify, Typesafety, 3D, Vitest Preview, Outstatic, Remix, React-Native..."
authors: [slorber]
date: 10-25-2022
---

Bonjour à tous !

La semaine dernière, j'ai fait une erreur : j'ai envoyé l'édition 220 au lieu de la 120 😅. Personne ne l'a remarqué, ce n'est probablement pas grave !

C'est la saison des conférences : le replay de ViteConf est disponible, React Advanced vient de se terminer, et il y en a d'autres à venir.

La conférence Next.js commence dans quelques heures. Nous aurons probablement une annonce de Next.js 13, avec des layouts imbriqués, et d'autres fonctionnalités super cool qui commencent par Turbo 🤭. Nous en discuterons la semaine prochaine.

Tous les hébergeurs s'accordent également pour améliorer leur support de Next.js simultanément : Netlify, Cloudflare, Microsoft...

Ne manquez pas la saison 5 des vidéos React-Native de William Candillon qui commence aujourd'hui !

J'ai enregistré un [épisode de podcast sur Docusaurus 2.0 avec PodRocket](https://podrocket.logrocket.com/docusaurus) le mois dernier. J'ai complètement oublié d'en parler 😅. J'aimerais faire plus d'épisodes de podcast à l'avenir, alors invitez-moi ! 😉

<!-- truncate -->

**💡 [Consultez cette newsletter sur Twitter](https://slo.im/thread) - format visuel 🎨**

---

import Support from "@site/newsletter/_support.mdx";

<Support />

---

## 💸 Partenaire {#sponsor1}

[![Sizzy - le navigateur pour développeurs](/emails/issues/220/sizzy.jpg)](https://sizzy.co/?utm_campaign=newsletter&utm_source=thisweekinreact)

Comment se fait-il que les professionnels de tous les autres secteurs disposent d'outils spécialisés, tandis que les développeurs web utilisent encore le navigateur de leur grand-mère pour faire des achats sur Amazon ?

Si vous ouvrez localhost:3000 dans un autre navigateur que Sizzy, vous gaspillez des heures de votre temps précieux.

**Avant Sizzy :** le développement web vous stresse, le responsive design est difficile, vous avez une quantité écrasante d'onglets et d'applications ouverts.

**Après Sizzy :** tous vos outils sont au même endroit, le responsive design devient simple, plus de changement de contexte.

Vous pouvez [le télécharger ici](https://sizzy.co/?utm_campaign=newsletter&utm_source=thisweekinreact) et l'essayer gratuitement pendant 14 jours !

---

## ⚛️ React {#react}

**[Pourquoi nous rompons avec CSS-in-JS](https://dev.to/srmagura/why-were-breaking-up-wiht-css-in-js-4g9b)**

Sam est mainteneur d'Emotion, l'une des bibliothèques CSS-in-JS les plus populaires. Il explique les avantages et inconvénients du CSS-in-JS, en se concentrant sur les problèmes des bibliothèques runtime. Pour son entreprise Spot, le coût de sérialisation des styles était trop élevé. Ils ont remplacé Emotion par des modules Sass (CSS modules + Sass) avec un système utilitaire CSS. Sur Docusaurus, nous utilisons des modules CSS et je confirme que c'est une bonne alternative sans runtime et relativement simple. L'expérience développeur (DX) n'est pas aussi bonne mais reste tout à fait acceptable.

Cet article a lancé de nombreuses discussions intéressantes. Il est connu depuis un moment que les bibliothèques CSS-in-JS avec runtime causent des problèmes de performance. [Dan Abramov le confirme](https://twitter.com/dan_abramov/status/1584835028986793984) et [ne veut utiliser aucun runtime sur le nouveau site de documentation React](https://github.com/reactjs/reactjs.org/issues/5115). Ryan Florence mentionne des [problèmes de performance avec Chakra](https://twitter.com/ryanflorence/status/1582835729360572416), qui utilise Emotion.

Tailwind reste une bonne alternative. Pour moi, il peut être classé dans la catégorie CSS-in-JS sans runtime, notamment dans un contexte React où le style Tailwind s'applique via JSX. Certains remettent en question sa [maintenabilité](https://twitter.com/hi__mayank/status/1584261503670448128), mais en pratique cela fonctionne plutôt bien.

**[Qwik React](https://qwik.builder.io/qwikcity/integrations/react/)**

Qwik est un framework SPA innovant qui [évite les problèmes de performance liés à l'hydratation côté client](https://www.builder.io/blog/hydration-is-pure-overhead). Il peut désormais s'intégrer avec React via une fonction `qwikify$()` pour encapsuler tout composant React existant. Les directives `client:` (inspirées d'Astro) permettent de contrôler avec une grande granularité quand le composant React sera hydraté. La démo intègre Material UI dans une application Qwik. Voir aussi [cette vidéo](https://www.youtube.com/watch?v=fLH28rDu97I). Je pense que c'est une bonne solution pour éviter de basculer entièrement sur ce nouveau framework, et l'essayer progressivement. Nous pouvons également conserver les propriétés multiplateformes de React tout en adoptant Qwik pour améliorer les performances web.

**[Fully Typed Web Apps](https://www.epicweb.dev/fully-typed-web-apps)**

Kent C. Dodds explique l'intérêt d'avoir une typage de bout en bout, de la base de données à l'interface utilisateur, à travers différentes frontières : réseau, stockage local, DB... Il parle de validation (schémas, gardes de type), de génération de types (Prisma) et de conventions (Remix). Il explique comment cette expérience est possible avec Remix grâce à l'inférence : il est préférable d'utiliser `typeof` plutôt que `as`.

**[Building an interactive WebGL experience in Next.js](https://vercel.com/blog/building-an-interactive-webgl-experience-in-next-js)**

Vercel explique comment ils ont créé une [expérience d'inscription immersive impressionnante pour la conf Next.js](https://nextjs.org/conf), basée sur React-Three-Fiber. Cela reste complexe à comprendre sans expérience en 3D/WebGL/Three.js, mais la décomposition en étapes successives est intéressante et donne un aperçu de l'état d'esprit nécessaire pour faire du développement créatif.

- 👀 [Pull-Request pour l'API React Cache](https://github.com/facebook/react/pull/25506) : expose une nouvelle API `React.experimental_cache`
- 📖 [Nouvelle doc bêta - cloneElement](https://twitter.com/dan_abramov/status/1582814754426433537)
- 📦 [Vitest Preview](https://www.vitest-preview.com/) : permet de déboguer visuellement les tests Vitest. Petit frère de [Jest Preview](https://www.jest-preview.com/).
- 📦 [Outstatic - Un CMS statique pour Next.js](https://outstatic.com/) : nouveau CMS basé sur Git qui s'intègre bien avec Next.js. Éditeur simple et convivial avec possibilité de télécharger des images.
- 📜 [Netlify - Routes d'API en arrière-plan et planifiées pour Next.js](https://www.netlify.com/blog/new-background-scheduled-api-routes-nextjs/) : Netlify utilise ses fonctions d'arrière-plan pour appeler les API Next.js basées sur des expressions cron.
- 📜 [Support Cloudflare Pages pour le runtime Edge de Next.js](https://blog.cloudflare.com/next-on-pages/) : Cloudflare prend désormais en charge Next.js, uniquement via le runtime `experimental-edge` qui peut s'exécuter sur Cloudflare Workers (contrairement au runtime Node.js). Leur solution est basée sur [l'API Vercel Build Output](https://vercel.com/blog/build-output-api), ce qui semble ouvrir la voie à une meilleure portabilité des frameworks edge-first entre différents clouds.
- 📜 [Microsoft - Extension du support Next.js dans Azure Static Web Apps](https://techcommunity.microsoft.com/t5/apps-on-azure-blog/extending-next-js-support-in-azure-static-web-apps/ba-p/3627975) : Azure prendra désormais en charge le SSR Next.js (auparavant : uniquement SSG).
- 📜 [Persister les saisies après la soumission d'un formulaire dans Remix](https://sergiodxa.com/articles/persist-inputs-after-a-form-submit-in-remix) : propose une amélioration progressive pour conserver les valeurs d'un formulaire après soumission. 2 solutions : retourner les valeurs dans l'action Remix ou utiliser la session flash.
- 📜 [Patterns de composants Layout curryfiés dans Next.js](https://creativedesignsguru.com/currying-nextjs-layout/) : suggère de paramétrer le `getLayout` de Next.js pour créer des variantes de Layout sans entraîner de démontage/remontage. Astuce utile aujourd'hui, pourrait devenir moins pertinente avec le futur support des layouts imbriqués.
- 📜 [Lancer vs. Retourner des réponses dans Remix](https://sergiodxa.com/articles/throwing-vs-returning-responses-in-remix)
- 📜 [Leçons tirées de la migration vers Recoil.js](https://kitemaker.co/blog/lessons-learned-from-moving-to-recoil)
- 📜 [Séparer les couches API dans les apps React](https://profy.dev/article/react-architecture-api-layer)
- 🎥 [Le nouveau hook use de React est-il un piège ?](https://www.youtube.com/watch?v=ytXM05PVcFU)
- 🎥 [React Advanced London 2022 - Jour 1](https://www.youtube.com/watch?v=1x7mI_xuVVo)
- 🧵 [Lottie vs Rive](https://twitter.com/guidorosso/status/1582086637328031745) : Lottie est assez populaire dans l'écosystème React mais son concurrent Rive semble bien plus performant à l'exécution.
- 🐦 [Code Zustand en un tweet](https://twitter.com/dai_shi/status/1583082766081531905)
- 🔗 [Nouveau site web pour Storybook](https://twitter.com/storybookjs/status/1583175829009289216)

<SubscribeFormEmbed />

---

## 💸 Sponsor {#sponsor2}

[![Sunsama - Comment des milliers d'ingénieurs logiciels restent productifs sans s'épuiser](/emails/issues/121/sunsama.jpg)](https://www.sunsama.com/a/this-week-in-react)

**[Comment des milliers d'ingénieurs logiciels restent productifs sans s'épuiser](https://www.sunsama.com/a/this-week-in-react)**

Vous savez que le résultat de votre travail compte plus que le nombre d'heures que vous y consacrez. **[Sunsama](https://www.sunsama.com/a/this-week-in-react)** est le secret bien gardé de milliers de développeurs qui l'utilisent pour travailler moins mais accomplir plus.

Éliminez le changement incessant d'onglets grâce à leur intégration JIRA, Github et Notion. Planifiez votre journée et créez de l'espace pour vos loisirs et projets personnels.

Le meilleur ? Ils proposent un **[essai gratuit de 14 jours](https://www.sunsama.com/a/this-week-in-react)** (sans carte nécessaire) pour commencer à accomplir plus dès aujourd'hui.

---

## 📱 React-Native {#react-native}

- 🎥 [Lecteur Headspace - "Peut-il être fait en React Native ?"](https://www.youtube.com/watch?v=pErnuAx5GjE): la saison 5 vient de commencer aujourd'hui 🤗
- 🤫 [Rumeurs autour d'Expo SDK 47](https://twitter.com/tsapeta/status/1582831949030522881): un SDK prometteur !
- 🗣 [La nouvelle architecture est là... et maintenant ? 3.0](https://twitter.com/Kelset/status/1583416697741975552): diapositives de React Advanced par Lorenzo (Microsoft).
- 📈 [Benchmarks de performance React-Native](https://twitter.com/almouro/status/1584628478963777537): Alexandre effectue des benchmarks quotidiens comparant les performances des architectures ancienne vs nouvelle sur divers scénarios.
- 📖 [Documentation Reassure](https://callstack.github.io/reassure/): Reassure dispose d'un tout nouveau site de documentation Docusaurus 🤗
- 📖 [Mises à jour des docs Expo - nouveau guide d'intégration du plugin Flipper](https://twitter.com/amanhimself/status/1583202477469765633)
- 📦 [create-react-native-library 0.25](https://twitter.com/satya164/status/1583462129235263490): modèle de module Kotlin Turbo
- 📦 [Expo Router 0.0.31](https://twitter.com/Baconbrix/status/1582875434567409664)
- 📦 [Expo Router 0.0.33](https://twitter.com/Baconbrix/status/1584289284713947136)
- 📦 [Realm JavaScript v11 - Prise en charge Hermes, Realm React, Flipper et bien plus](https://www.mongodb.com/developer/products/realm/realm-javascript-v11-react-native/)
- 🎙️ [RNR 249 - Réflexions d'un mainteneur Redux sur RTK vs MST](https://reactnativeradio.com/episodes/rnr-249-a-redux-maintainers-thoughts-on-rtk-vs-mst)

---

## 🧑‍💻 Offres d'emploi {#jobs}

🧑‍💼 [**Ingénieur Produit chez Causal, Remote/Londres/NY, 150-250k$**](https://jobs.lever.co/causal-app/4acaafbe-ef3d-45a6-bbe6-687c022d727c?lever-origin=applied&lever-source%5B%5D=thisweekinreact.com)

Causal est une startup de série A (soutenue par Coatue/Accel) développant un outil tout-en-un pour manipuler des nombres et visualiser des données. Nous recherchons des ingénieurs React expérimentés capables de résoudre des défis UX/performance complexes.

🧑‍💼 [**G2i - Emplois React Native 100% distanciels**](https://twitter.com/gabe_g2i/status/1563204813881425926?s=20&t=ArRLC77BpRwXXCdx8fnUqw)

Plusieurs postes ouverts pour développeurs spécialisés en React Native ! Rémunération ~160k + 10% de bonus. Expérience en production avec RN requise et résidence aux États-Unis. DM [@gabe_g2i](https://twitter.com/gabe_g2i) pour plus d'informations en mentionnant This Week in React.

💡 [Comment publier une offre ?](https://thisweekinreact.com/sponsor)

---

## 🔀 Autres {#other}

- [Parlons des composants Web](https://bradfrost.com/blog/post/lets-talk-about-web-components/) : Lecture intéressante de Brad Frost sur les composants Web, qui ne sont pas nécessairement incompatibles avec React mais peuvent le compléter (ex. : un système de design dans une app React). Les difficultés actuelles (SSR) seront finalement surmontées.
- [Application Replit](https://twitter.com/amasad/status/1582754714575257600) : nouvelle application pour coder sur votre téléphone (réalisée avec [Expo](https://twitter.com/amasad/status/1582968657675661314)). Des modèles permettent de coder en Next.js.
- [Présentation de Node.js 19](https://www.redhat.com/en/blog/introducing-nodejs-19) - Note : Node.js 18 passe en LTS aujourd'hui !
- [Présentation de Stately Studio 1.0](https://stately.ai/blog/introducing-stately-studio-10) : Éditeur de machines à états XState
- [Plans pour Vite 4](https://github.com/vitejs/vite/discussions/10570) : mise à niveau vers Rollup 3, compatibilité es2020...
- [Replay de ViteConf 2022](https://viteconf.org/2022/replay)
- [Turborepo 1.6 - Utiliser Turborepo dans des non-monorepos](https://twitter.com/turborepo/status/1583518617970233346)
- [Solid 1.6](https://twitter.com/solid_js/status/1583016386984480768)
- [CSS Futuriste](https://www.smashingmagazine.com/2022/10/futuristic-css/)
- [Y a-t-il trop de CSS aujourd'hui ?](https://css-tricks.com/is-there-too-much-css-now/)
- [Confusion des scripts npm bin : Détournement de la commande 'node' via 'bin'](https://socket.dev/blog/npm-bin-script-confusion)
- [Tailwind CSS v3.2 : Points de rupture dynamiques, multi-configuration et requêtes de conteneur](https://twitter.com/adamwathan/status/1582793658168152065)
- [Tailwind CSS v3.2 : Revisite de mon avertissement sur le « feature creep »](https://www.brycewray.com/posts/2022/10/tailwind-css-v3-2-revisiting-feature-creep-warning/)
- [Can I DevTools - Comparer les fonctionnalités des DevTools des navigateurs](https://canidev.tools)
- [Vercel - Fonctions Edge Régionales](https://vercel.com/blog/regional-execution-for-ultra-low-latency-rendering-at-the-edge)
- [Deno - Quelle plateforme serverless edge a les déploiements git les plus rapides ?](https://deno.com/blog/fastest-git-deploys-to-the-edge)
- [Cloudflare Workers et micro-frontends : faits l'un pour l'autre](https://blog.cloudflare.com/better-micro-frontends/)
- [Blink : Intention de livrer : Module CSS Color Level 4 + color-mix()](https://twitter.com/intenttoship/status/1583110354074116096)
- [Notes de version pour Safari Technology Preview 156](https://webkit.org/blog/13394/release-notes-for-safari-technology-preview-156/)
- [Fonctionnalités WebKit dans Safari 16.1](https://webkit.org/blog/13399/webkit-features-in-safari-16-1/)
- [Métaprogrammation JavaScript avec l'API des décorateurs 2022-03](https://2ality.com/2022/10/javascript-decorators.html)

---

## 🤭 Amusant {#fun}

[![Mème - VSCode fonctionnant sur iWatch](/emails/issues/121/meme.png)](https://twitter.com/rohanpdofficial/status/1583455633134977026)