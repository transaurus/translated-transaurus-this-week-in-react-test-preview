---
slug: /187
title: "This Week In React #187: Next.js, Expo, Popover, rethrow, SWR, React-Query, Astro, PPR, tRPC, zsa, Memory leaks, INP, RN IDE, Skia, WebGPU, RNSC, Atlas, Re.Pack, Prisma, SwiftUI, Flutter, Angular..."
authors: [slorber, bndkt]
date: 05-29-2024
---

Bonjour Ã  tous !

La semaine derniÃ¨re, nous avons eu d'excellentes annonces des confÃ©rences Vercel Ship et App.js.

J'ai Ã©galement trouvÃ© les articles de blog de la communautÃ© trÃ¨s intÃ©ressants cette semaine ! Il y a beaucoup de bon contenu Ã  lire ici. Celui sur les fuites mÃ©moire est assez effrayant ğŸ˜….

Je me demande derniÃ¨rement : est-il encore utile d'Ã©crire un [thread Twitter](https://slo.im/thread) ? J'ai [posÃ© la question sur Twitter](https://x.com/sebastienlorber/status/1795377678918554072) et j'ai l'impression que presque personne ne les lit, Ã  part quelques personnes. Je pense arrÃªter. Qu'en pensez-vous ? ğŸ¤”

<!-- truncate -->

**ğŸ’¡ [Consultez cette newsletter sur Twitter](https://slo.im/thread) - format visuel ğŸ¨**

---

import Support from "@site/newsletter/_support.mdx";

<Support />

---

## ğŸ’¸ Sponsor {#sponsor1}

[![React-admin : Le framework open-source pour les apps B2B](/emails/issues/187/reactadmin.jpg)](https://marmelab.com/react-admin/)

**[React-admin : Le framework open-source pour les apps B2B](https://marmelab.com/react-admin/)**

ğŸ‘©ğŸ»â€ğŸ’» **Par des dÃ©veloppeurs, pour des dÃ©veloppeurs** : React-admin est une bibliothÃ¨que gratuite low-code qui accÃ©lÃ¨re le dÃ©veloppement d'outils internes, d'interfaces d'administration ou d'applications B2B. Contrairement aux outils no-code, vous utilisez du code, garantissant de ne jamais Ãªtre limitÃ© par le framework.

ğŸ”Œ **IntÃ©gration flexible** : React-admin prend en charge n'importe quel format d'API (REST ou GraphQL) et divers backends d'authentification, notamment Auth0, Cognito, Google Auth, Active Directory et Keycloak. Vous contrÃ´lez le serveur, donc aucun coÃ»t supplÃ©mentaire pour l'authentification unique (SSO). EntiÃ¨rement personnalisable, vous pouvez l'adapter aux couleurs de votre entreprise.

ğŸš€ **SuccÃ¨s avÃ©rÃ©** : Plus de 25 000 entreprises ont crÃ©Ã© des applications monopage avec React-admin. Pour votre prochain projet, Ã©conomisez des semaines de dÃ©veloppement en utilisant react-admin. [Essayez react-admin maintenant](https://marmelab.com/react-admin/).

---

## âš›ï¸ React {#react}

[![Next.js 15 RC](/emails/issues/187/nextjs.jpg)](https://nextjs.org/blog/next-15-rc)

**[Next.js 15 RC](https://nextjs.org/blog/next-15-rc)**

Une nouvelle version majeure de Next.js est sortie en RC lors de Vercel Ship la semaine derniÃ¨re. Les points forts de cette version sont :

- Support de React 19 RC
- Support expÃ©rimental du React Compiler via le plugin Babel (peut augmenter le temps de build)
- AmÃ©liorations des erreurs d'hydratation affichant les diffÃ©rences
- Cache moins agressif, dÃ©sormais opt-in : `fetch` et les Route Handlers ne sont plus mis en cache par dÃ©faut
- Adoption progressive du Prerendering Partiel avec une nouvelle option de configuration de route `experimental_ppr`
- Nouveau design de `create-next-app`, proposant Turbo en dev et capacitÃ© Ã  crÃ©er des projets
- next/after (expÃ©rimental), nouvelle API utile pour diffÃ©rer les tÃ¢ches analytiques et maintenir des rÃ©ponses rapides
- Optimisation du bundling des packages externes (`serverExternalPackages`) dÃ©sormais stable

D'autres Ã©lÃ©ments intÃ©ressants ont Ã©tÃ© annoncÃ©s Ã  Vercel Ship. Ressources supplÃ©mentaires Ã  consulter :

- ğŸ“œ [RÃ©capitulatif de Vercel Ship 2024](https://vercel.com/blog/vercel-ship-2024)
- ğŸ“œ [PrÃ©sentation des intÃ©grations approfondies pour les feature flags dans Vercel](https://vercel.com/blog/feature-flags)
- ğŸ“œ [PrÃ©sentation du pare-feu d'applications web de Vercel](https://vercel.com/blog/introducing-the-vercel-waf)
- ğŸ¥ [Jack Herrington - NextJS 15 : React 19, moins de cache, Turbopack, meilleures erreurs d'hydratation et plus encore de Vercel Ship !](https://www.youtube.com/watch?v=N2LzvfM2R5M)

---

- ğŸ’¸ [Build AI apps with React and JavaScript â€”Â Frontend and UI for any LLM](https://docs.nlkit.com/nlux/?utm_source=twir-my24-3)
- ğŸ‘€ [React Core PR - Throw if React and React DOM versions don't match](https://github.com/facebook/react/pull/29236): React 19 will be stricter and require that the renderer version (DOM or RN) uses the exact same version as the core React package.
- ğŸ‘€ [React DOM PR - Add support for Popover API](https://github.com/facebook/react/pull/27981): This new API is now available in all major browsers, and React just merged support for it.
- ğŸ‘€ [Next.js PR - `unstable_rethrow`](https://github.com/vercel/next.js/pull/65831): Upcoming Next.js API to avoid catching internal errors thrown by Next.js (such as redirect/notFound errors).
- ğŸ¦ [Latest SWR beta can seamlessly move data fetching between client-side and server-side](https://x.com/shuding_/status/1794461568505352693). And [React-Query](https://x.com/TkDodo/status/1794801851671695533) + [Apollo Client](https://x.com/phry/status/1795777518944784450) also implemented similar features.
- ğŸ—“ [React Rally](https://reactrally.com/?utm_source=thisweekinreact) - ğŸ‡ºğŸ‡¸ Utah - 12-13, August - Get a 10% discount with code "TWIR". Thereâ€™s an advanced React [workshop](https://reactrally.com/workshop) with Cory House.
- ğŸ“œ [Sneaky React Memory Leaks: How useCallback and closures can bite you](https://schiener.io/2024-03-03/react-closures): A great article simplifying a real production app memory leak to explain it. This surprised me, I couldnâ€™t guess such React code would leak memory, and pretty sure my apps contain memory leaks now ğŸ˜…. Good news though: the app wouldn't leak memory when using the new React Compiler.
- ğŸ“œ [Automatic Query Invalidation after Mutations](https://tkdodo.eu/blog/automatic-query-invalidation-after-mutations): React Query is un-opinionated about how you invalidate cached resources and instead lets you implement a custom strategy on top of flexible primitives. For example, you can invalidate queries by tags.
- ğŸ“œ [Migrating from Radix to React Aria: Improving Accessibility and UX](https://argos-ci.com/blog/react-aria-migration): After having used alternatives such as Reakit or Radix, Greg gives good reasons for adopting React Aria. The migration feedback is positive, but some challenges were encountered. React Aria is quite â€œstrictâ€ at ensuring your components remain accessible.
- ğŸ“œ [On Laravel, Full-Stack JavaScript, and Productive Frameworks](https://www.jplhomer.org/posts/on-laravel-full-stack-javascript-and-productive-frameworks/): Josh created 2 React meta-frameworks (including Shopify Hydrogen) and also uses Laravel extensively. He shares an interesting perspective on the pros/cons of the Laravel vs React ecosystem.
- ğŸ“œ [A virtual DOM in 200 lines of JavaScript](https://lazamar.github.io/virtual-dom/): This greatly explains how a virtual DOM (like the one from React) works under the hood, by creating a small library that can run a TodoMVC app.
- ğŸ“œ [Design System Retrospective](https://kyleshevlin.com/design-system-retrospective/): Interesting perspective on the successfulness of implementing a Chakra-like design system (tokens as props). The average dev struggled to understand how to compose primitives. Tailwind might be a better fit for them.
- ğŸ“œ [Combining React Server Components with react-query for Easy Data Management](https://frontendmasters.com/blog/combining-react-server-components-with-react-query-for-easy-data-management/): A good read explaining limits RSCs. Server Actions run serially, and you need to wait for RSCs to re-render which might be slow without proper caching. Using React-Query with prefetching might slightly increase bundle size and produce more roundtrips, but overall that could give a faster UX.
- ğŸ“œ [Using Server Actions with tRPC](https://trpc.io/blog/trpc-actions): Server Actions are similar to tRPC but come barebone. tRPC maintainer explains things that tRPC enables on top, such as auth, input validation, observability, rate-limiting, and other possible middleware. Note there are alternatives to consider such as next-server-action and zsa.
- ğŸ“œ [Optimizing INP for a React App & Performance Learnings](https://www.iamtk.co/optimizing-inp-for-a-react-app-and-performance-learnings): A long feedback on optimizing responsiveness on a React 18 prod app. Various takeaways include deferring work and analytics, or being careful of useless re-renders.
- ğŸ“œ [Partial Prerendering without a framework](https://developers.netlify.com/guides/partial-prerendering-without-a-framework/): Demo from Netlify CEO shows how to implement â€œvanilla PPRâ€ (without Next.js which has this as an experimental feature).
- ğŸ“œ [Behind the â€˜asâ€™ prop: polymorphism done well](https://www.kripod.dev/blog/behind-the-as-prop-polymorphism-done-well/): Also explains how to type it properly.
- ğŸ“œ [Redwood - Using Middleware: RSS and Sitemap](https://redwoodjs.com/blog/using-middleware-rss-and-sitemap)
- ğŸ“œ [Structured logging for Next.js - Using the Pino logging library](https://blog.arcjet.com/structured-logging-in-json-for-next-js/)
- ğŸ“œ [Facebook just updated its relationship status with web components](https://www.mux.com/blog/facebook-just-updated-it-s-relationship-status-with-web-components)
- ğŸ“œ [Authentication with WorkOS in Next.js: A Comprehensive Guide](https://www.nirtamir.com/articles/authentication-with-workos-in-next-js-a-comprehensive-guide)
- ğŸ“œ [The Next.js \<Image> Component](https://www.premieroctet.com/blog/en/next-image-component)
- ğŸ“œ [How To Dockerize A React App](https://scientyficworld.org/how-to-dockerize-a-react-app/)
- ğŸ“¦ [Astro 4.9 - React 19 support for Astro Actions](https://astro.build/blog/astro-490/): Adds new withState/getActionState APIs to integrate Astro with React 19 useActionState, including progressive enhancement.
- ğŸ“¦ [Storybook 8.1 - typesafe mocking, Unit testing React Server Components](https://storybook.js.org/blog/storybook-8-1/)
- ğŸ“¦ [NextUI 2.4](https://nextui.org/blog/v2.4.0)
- ğŸ“¦ [Ark UI 3.0](https://ark-ui.com/react/docs/overview/changelog#300---2024-05-24)
- ğŸ“¦ [React-Query 5.39 - Supports React 19](https://github.com/TanStack/query/releases/tag/v5.39.0)
- ğŸ“¦ [Redwood 7.6 - React Compiler experimental flag](https://github.com/redwoodjs/redwood/releases/tag/v7.6.0)
- ğŸ“¦ [zsa 0.1 - Typesafe Server Actions for Next.js](http://next.js)
- ğŸ“¦ [React-Executor - Asynchronous task execution and state management for React](https://github.com/smikhalevski/react-executor)
- ğŸ¥ [UI Engineering - Portals Can Share State Between Windows](https://www.youtube.com/watch?v=jZx33FPMXzc): It's a pretty cool idea to use React portals to integrate seamlessly between windows and might also be useful for the upcoming browser Picture-in-Picture API.
- ğŸ¥ [Theo - I Was Wrong About React Router.](https://www.youtube.com/watch?v=m86HssTKExU)
- ğŸ¥ [James Quick - Astro Launches Actions Similar like Next.js](https://www.youtube.com/watch?v=8mIUIhp2YGQ)

<SubscribeFormEmbed placement="middle" />

---

## ğŸ’¸ Sponsor {#sponsor2}

[![Tutoriel d'authentification Next.js avec RSC et Server Actions](/emails/issues/186/AuthKitNextjs.jpg)](https://www.youtube.com/watch?v=aoRG1q_kVo8)

**[Tutoriel d'authentification Next.js avec RSC et Server Actions](https://www.youtube.com/watch?v=aoRG1q_kVo8)**

Le dernier tutoriel avec WorkOS et Sam Selikoff montre comment ajouter facilement la boÃ®te de connexion hÃ©bergÃ©e d'AuthKit Ã  une application Next.js :

ğŸ“šÂ Get started using the Authkit \<> Next.js [integration library](https://github.com/workos/authkit-nextjs)  
ğŸ¤– Set up environment variables, configure the callback route and middleware, and implement signIn and signOut functionalities  
âš™ï¸ Protect routes in the Next.js app from unauthenticated users with the getUser function

AuthKit peut Ãªtre utilisÃ© avec la gestion des utilisateurs WorkOS, qui prend en charge la MFA, la liaison d'identitÃ©, la vÃ©rification par e-mail, l'usurpation d'utilisateur et plus encore.

Le meilleur : c'est **gratuit jusqu'Ã  1 000 000 d'utilisateurs mensuels actifs ğŸš€**

---

## ğŸ“± React-Native {#react-native}

Cette section est rÃ©digÃ©e par [Benedikt](https://twitter.com/bndkt).

![capture d'Ã©cran de 4 diapositives App.js](/emails/issues/187/rn.jpg)

La saison creuse oÃ¹ tout le monde gardait ses annonces pour les confÃ©rences Ã  venir est terminÃ©e, avec la confÃ©rence App.js de la semaine derniÃ¨re qui nous a dÃ©versÃ© un nouveau flot de contenu incroyable et d'annonces passionnantes ! Expo a annoncÃ© Atlas, nommÃ© Ã  propos, qui sert de carte pour explorer le territoire sauvage du Bundler. Si vous avez toujours voulu comprendre comment le code entre et sort de votre application, c'est l'outil qu'il vous faut. Il est particuliÃ¨rement utile pour rÃ©duire la taille du bundle, mais aussi simplement pour mieux comprendre le fonctionnement de votre application. Dans l'espace ORM, Drizzle a lancÃ© son Studio en tant que plugin d'outils de dÃ©veloppement Expo et Prisma a annoncÃ© qu'ils ajouteraient la prise en charge de React Native. L'IDE React Native est dÃ©sormais en bÃªta ouverte et vous pouvez le tÃ©lÃ©charger sur le marketplace d'extensions VS Code. Enfin, William Candillon a annoncÃ© la prise en charge vidÃ©o Ã  venir pour RN Skia, ainsi que WebGPU dans React Native ! Bien sÃ»r, nous restons trÃ¨s enthousiastes Ã  propos des Universal React Server Components que nous avons dÃ©jÃ  mentionnÃ©s la semaine derniÃ¨re. Assurez-vous de rattraper et de regarder le [flux en direct de la confÃ©rence App.js](http://app.js).

---

- ğŸ’¸ [WithFrame - Composants React Native prÃ©-construits](https://withfra.me/components?utm_source=thisweekinreact&utm_medium=email&utm_campaign=quick-link--1)
- ğŸ¦ [Re.Pack V5 sera basÃ© sur Rspack au lieu de Webpack](https://x.com/_jbroma/status/1793286546008981933): Cela apporte des amÃ©liorations significatives de performance (DÃ©marrage Ã  froid : 15s â†’ 2.5s, build : 10s â†’ 2s, HMR : 450ms â†’ 100ms).
- ğŸ—“ [Chain React Conf](https://chainreactconf.com/?utm_source=thisweekinreact) - ğŸ‡ºğŸ‡¸ Portland, OR - 17-19 juillet. La confÃ©rence amÃ©ricaine React Native est de retour avec des prÃ©sentations captivantes et des ateliers pratiques ! Obtenez 15% de rÃ©duction sur votre billet avec le code Â« TWIR Â»
- ğŸ“œ [PrÃ©sentation d'Expo Atlas](https://expo.dev/blog/introducing-expo-atlas): L'Ã©quipe Expo a utilisÃ© cet outil en interne pour travailler sur un rÃ©solveur Metro plus rapide, amÃ©liorer leur configuration Babel, ainsi que pour leur travail sur RSC. Maintenant, vous pouvez l'utiliser pour mieux comprendre et optimiser votre application !
- ğŸ“œ [RNW 0.74 lancÃ© : Une amÃ©lioration de la Galerie et les fondations de Fabric ! React Native](https://devblogs.microsoft.com/react-native/2024-05-24-improved-gallery-fabric-0-74/): Une nouveautÃ© que j'ai dÃ©couverte dans cette annonce est l'application React Native Gallery, essentiellement une application de dÃ©monstration complÃ¨te pour RN sur Windows.
- ğŸ“œ [Apporter l'ORM Prisma Ã  React Native et Expo](https://www.prisma.io/blog/bringing-prisma-orm-to-react-native-and-expo): Prisma, y compris les requÃªtes rÃ©actives, est dÃ©sormais disponible sur RN (en version bÃªta). Et il semble qu'ils travaillent Ã©galement sur une solution de synchronisation locale-first.
- ğŸ“œ [Utiliser React-Admin avec React Native](https://marmelab.com/blog/2024/05/22/using-react-admin-with-react-native.html): React-Admin est un framework pour construire rapidement des applications CRUD. Cet article montre comment tirer parti de son architecture headless pour l'utiliser avec RN.
- ğŸ“œ [Fluttering in the sky](https://www.celest.dev/blog/fluttering-in-the-sky): Non React Native mais mÃ©rite d'Ãªtre mentionnÃ© qu'une entreprise travaille sur l'Ã©quivalent des React Native Server Components pour Flutter.
- ğŸ“¦ [L'IDE React Native est dÃ©sormais en bÃªta ouverte](https://ide.swmansion.com/): TÃ©lÃ©chargez-le simplement comme une extension VS Code depuis le marketplace de VS Code.
- ğŸ“¦ [SwiftUI-React-Native 6.0](https://github.com/andrew-levy/swiftui-react-native): Utilisez les fonctionnalitÃ©s SwiftUI directement depuis React Native.
- ğŸ“¦ [React Native Skia 1.3.0](https://github.com/Shopify/react-native-skia/releases/tag/v1.3.0): Skia peut dÃ©sormais afficher des vidÃ©os.
- ğŸ“¦ [Drizzle Studio est dÃ©sormais disponible pour Expo SQLite via un plugin d'outils de dÃ©veloppement](https://github.com/drizzle-team/drizzle-studio-expo/tree/main): C'est super pratique ! Plus besoin de chercher le dossier du systÃ¨me de fichiers du Simulateur sur votre Mac pour ouvrir le fichier sqlite dans une interface graphique sÃ©parÃ©e Ã  des fins de dÃ©bogage.
- ğŸ¥ [Simon Grimm - 10 points Ã  retenir pour les dÃ©veloppeurs React Native de la confÃ©rence App.js](https://www.youtube.com/watch?v=mhos9givltA)

---

## ğŸ”€ Autres {#other}

- ğŸ“œ [Ce que nous avons appris de la premiÃ¨re enquÃªte State of HTML](https://frontendmasters.com/blog/state-of-html-2023-results-2/)
- ğŸ“œ [Les Â« Web components Â» considÃ©rÃ©s comme nuisibles](https://www.mayank.co/blog/web-components-considered-harmful/)
- ğŸ“¦ [Angular 18.0 - Zoneless, Material 3, vues diffÃ©rÃ©esâ€¦](https://blog.angular.dev/angular-v18-is-now-available-e79d5ac0affe)
- ğŸ“¦ [TypeScript-ESLint v8 bÃªta - Support d'ESLint 9](https://typescript-eslint.io/blog/announcing-typescript-eslint-v8-beta/)
- ğŸ“¦ [fnm 1.36 - gestionnaire de versions Node.js rapide](https://github.com/Schniz/fnm/releases/tag/v1.36.0)
- ğŸ“¦ [rsbuild 0.7](https://rsbuild.dev/community/releases/v0-7)

---

## ğŸ¤­ Divertissement {#fun}

[![alt](/emails/issues/187/meme.jpg)](https://x.com/jamonholmgren/status/1791255201774719178)

Ã€ plus ! ğŸ‘‹