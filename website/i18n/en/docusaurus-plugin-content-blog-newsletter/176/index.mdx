---
slug: /176
title: "This Week In React #176: useActionState, React Compiler, Million Lint, TanStack, Generative UI, Vinxi, Remix i18n, Next.js security, Typesafe Router, Shopify RN perf, RCTRootViewFactory, iOS Live Activities, Uni Stack, TypeScript, Parcel..."
authors: [slorber, bndkt]
date: 03-06-2024
---

Bonjour à tous !

Cette semaine est difficile à résumer, il y a beaucoup de nouvelles intéressantes et je ne sais pas lesquelles mettre en avant.

Nous avons notamment un aperçu d'un nouveau hook React de base remplaçant le `useFormState` confus, que même les développeurs React Native pourront désormais utiliser !

<!-- truncate -->

**💡 [Consultez cette newsletter sur Twitter](https://slo.im/thread) - format visuel 🎨**

---

import Support from "@site/newsletter/_support.mdx";

<Support />

---

## 💸 Sponsor {#sponsor1}

[![Axiom - la meilleure plateforme de logs pour les apps Vercel](/emails/issues/171/axiom.jpg)](https://axiom.co/vercel)

**[Axiom - la meilleure plateforme de logs pour les apps Vercel](https://axiom.co/vercel)**

😴 Dormez paisiblement sachant que l'observabilité sans configuration d'Axiom pour les projets Vercel vous couvre.

- Utilisez le tableau de bord préconstruit d'Axiom pour une vue d'ensemble de tous vos logs et métriques Vercel, explorez des projets et déploiements spécifiques, et obtenez des insights sur les performances des fonctions en un clic.
- [next-axiom](https://github.com/axiomhq/next-axiom) vous permet d'envoyer des logs et événements depuis n'importe quelle partie de vos projets Next.js - client, edge ou serveur - sans configuration spéciale.
- Envoyez facilement des logs structurés depuis votre code et analysez-les avec vos logs Vercel.

Axiom capture efficacement 100% de vos données événementielles, vous n'aurez jamais à vous soucier d'échantillonnage ou de rétention, et ne devinerez plus ce que vivent vos utilisateurs.

**PS** : [Je l'utilise personnellement pour surveiller les inscriptions à la newsletter](https://twitter.com/sebastienlorber/status/1528666563452317696) 😉

---

## ⚛️ React {#react}

[![PR React Core - Nouveau hook useActionState](/emails/issues/176/useActionState.jpg)](https://github.com/facebook/react/pull/28491)

**[PR React Core - Nouveau hook useActionState](https://github.com/facebook/react/pull/28491)**

It turns out the useFormState hook was confusing, and not even meant to be solely used in forms. The React team is addressing this by introducing a new React core hook to replace it:

- Renomme `useFormState` en `useActionState`
- Ajoute un état pending au tuple retourné
- Déplace le hook vers le package `react`

Le déplacer de `react-dom` vers `react` signifie également que d'autres moteurs de rendu comme React Native pourront désormais l'utiliser. D'autres avantages existent, comme une fonctionnalité de "progressive enhancement partiel", mais aussi de nouvelles mises en garde documentées dans la PR.

---

- 💸 [Secure your documents with PDF Redaction. Discover how to protect sensitive information in PDFs using React. Visit our blog to learn more.](https://apryse.com/blog/pdf-redaction-using-react?utm_source=this%20week%20in%20react&utm_medium=newsletter3)
- 🐦 [React 19 != React Compiler](https://twitter.com/sebastienlorber/status/1764950877620654474): The React Labs post is a bit ambiguous and misled many of us, so let’s clarify. The compiler will likely come after the React 19.0 release as a separate project, and there’s a good chance it will initially be released as a Babel/TypeScript plugin. The internals are decoupled through, so it shouldn’t take long to adapt it it to Rust.
- 🐦 [TanStack Start preview](https://twitter.com/tannerlinsley/status/1765120904370307438): Tanner works on a TanStack Start full-stack framework based on Vinxi and TanStack Router. This preview shows he’s migrating his own TanStack site to it.
- 📜 [Vercel - Introducing AI SDK 3.0 with Generative UI support](https://vercel.com/blog/ai-sdk-3-generative-ui): With the AI SDK 3.0 and thanks to React Server Components, you can now stream UI components directly from LLMs. Super impressive demos!
- 📜 [Secure statically rendered paid content in Next.js (with the App Router)](https://www.ericburel.tech/blog/static-paid-content-app-router): Shows that using Next.js layouts for authentication is not super secure, and the protected content can still leak through the RSC endpoint. Suggests using a middleware instead.
- 📜 [Internationalization with Remix](https://remix.run/blog/remix-i18n): Goes back to i18n fundamentals, and then detail various i18n solutions you can set up within Remix. Optional route segments can help you use localized sub-directories.
- 📜 [Did you know you can write your own typesafe React router in 500 lines?](https://sinja.io/blog/build-typesafe-react-router-from-scratch): A great comprehensive article that might give you a better understanding of how existing routers work. Also great to learn about advanced TypeScript type-level programming techniques.
- 📜 [Streaming HTML out of order without JavaScript](https://lamplightdev.com/blog/2024/01/10/streaming-html-out-of-order-without-javascript/): This super interesting demo shows we don’t need JavaScript to stream out-of-order HTML chunks, and yet render them in the correct order. All you need is Declarative Shadow DOM and slots. It will be interesting to see if RSC streaming + Suspense could leverage that technique in the future instead of inlining JavaScript.
- 📜 [Simple RSC With Vinxi](https://www.brenelz.com/posts/simple-rsc-with-vinxi/): The Vinxi SDK helps you create your own full-stack framework, and it even has a plugin for React Server Components support!
- 📜 [Million.js - Blocks with noSlot Mode](https://million.dev/blog/block-noSlot): the Million compiler might wrap your components with `<slot>` elements, which might cause issues (styling). This introduces a new experimental `noSlot` mode..
- 📜 [How to add Monaco to a Next.js app to enable custom user workflows](https://deno.com/blog/monaco-nextjs): Interesting tutorial that also shows how to deploy untrusted user code to Deno.
- 📜 [Conceptual Model of React and RSC](https://ondrejvelisek.github.io/conceptual-model-of-react-and-rsc/): Reflects around the UI=f(state) formula in interesting ways, and concludes RSC kind of breaks the original model.
- 📜 [Why React Server Components Are Breaking Builds to Win Tomorrow](https://www.builder.io/blog/why-react-server-components)
- 📜 [The End Of My Gatsby Journey](https://www.smashingmagazine.com/2024/03/end-of-gatsby-journey/)
- 📜 [React Admin March 2024 Update](https://marmelab.com/blog/2024/03/05/react-admin-march-2024-update.html)
- 📦 [Million Lint - public beta](https://million.dev/blog/lint): A VSCode extension that helps you keep your React code fast thanks to dynamic analysis. Much simpler to use than React Devtools flame graphs. There will be an additional AI-based Lint++ paid service built on top to suggest you possible performance improvements.
- 📦 [react-unforget - A compiler for automatic optimization of React apps](https://github.com/mohebifar/react-unforget): After Forgetti, this is another new alternative React compiler coming from the community. See also 🐦 [Joe Savona’s feedback](https://twitter.com/en_JS/status/1763593971224494106).
- 📦 [Remix 2.8 - Pass resolved viteConfig to buildEnd hook](https://remix.run/docs/en/main/start/changelog#v280)
- 📦 [React Query 5.25 - skipToken, typesafe query disabling](https://github.com/TanStack/query/releases/tag/v5.25.0)
- 📦 [TanStack Router 1.18 - route groups](https://github.com/TanStack/router/releases/tag/v1.18.0)
- 📦 [Starlight 0.21 - New UI components: Steps, FileTree](https://starlight.astro.build/guides/components/)
- 📦 [Storybook 8.0 RC - v8 is officially stable enough to be used in production](https://github.com/storybookjs/storybook/releases/tag/v8.0.0-rc.0)
- 📦 [Onborda - Onboarding wizard flow for Next.js powered by Framer Motion](https://github.com/uixmat/onborda)
- 📦 [Input-OTP - One-time password input component for React](https://input-otp.rodz.dev/)
- 📦 [Panda 0.33](https://github.com/chakra-ui/panda/discussions/2274)
- 📦 [UVCanvas - React component library for beautifully shaded canvas](https://uvcanvas.com)
- 🎥 [Jack Herrington - Is Tanstack Router Better Than React-Router?](https://www.youtube.com/watch?v=qOwnQJOClrw)
- 🎥 [Theo - How Shadcn/ui Actually Works](https://www.youtube.com/watch?v=AqmMx_JidGo)

<SubscribeFormEmbed placement="middle" />

---

## 💸 Sponsor {#sponsor2}

[![Besoin de plus qu'une simple boîte de connexion ?](/emails/issues/176/clerk.jpg)](https://clerk.com/?utm_source=thisweekinreact&utm_medium=newsletter&utm_campaign=middleware&utm_content=03-06-24)

**[Besoin de plus qu'une simple boîte de connexion ?](https://clerk.com/?utm_source=thisweekinreact&utm_medium=newsletter&utm_campaign=middleware&utm_content=03-06-24)**

Clerk simplifie l'authentification et la gestion des utilisateurs pour les applications React, garantissant une configuration rapide pour le web moderne.

Découvrez les avantages de Clerk :

- 💅 Composants d'interface prédéfinis pour la connexion, l'inscription, les profils utilisateurs et les organisations. Personnalisez avec n'importe quelle bibliothèque CSS et déployez sur votre domaine
- 📦 SDKs pour React, React Native, Next.js, Redwood, Remix et autres frameworks
- ⚡ Intégrations avec Firebase, Supabase, Convex et autres fournisseurs BaaS
- 🎁 Gestion des utilisateurs, connexion sociale, liens magiques, MFA et plus encore prêts à l'emploi

Plongez dans les [démarrages rapides et tutoriels de Clerk](https://clerk.com/docs/quickstarts/overview?utm_source=sponsorship&utm_medium=newsletter&utm_campaign=thisweekinreact&utm_term=02-28-24) pour lancer votre projet 🚀

---

## 📱 React-Native {#react-native}

Cette section est désormais co-écrite avec [Benedikt](https://twitter.com/bndkt). N'hésitez pas à nous envoyer vos commentaires par email ou sur [Twitter](https://twitter.com/bndkt) !

[![Amélioration des performances de l'application Shopify](/emails/issues/176/shopify.jpg)](https://shopify.engineering/improving-shopify-app-s-performance)

**[Amélioration des performances de l'application Shopify](https://shopify.engineering/improving-shopify-app-s-performance)**

Shopify est un partisan de React Native depuis longtemps. Mais ils ont constaté une baisse des performances de leur application depuis leur migration vers React Native. Plutôt que de blâmer la pile technologique, ils se sont attelés à optimiser les performances. Les résultats parlent d'eux-mêmes : le lancement de l'application est 44% plus rapide et les temps de chargement des écrans ont été réduits de 59%. Voici un résumé rapide des mesures prises (indice : FlashList joue un rôle majeur dans certaines). Pour les détails, lisez leur excellent article de synthèse :

- Rendre initialement uniquement ce qui est visible à l'écran (particulièrement vrai pour l'écran d'accueil)
- Construire tous les écrans sous forme de listes (basées sur FlashList)
- Utiliser inlineRequires
- Regrouper les changements d'état
- Optimiser la mise en cache

Des informations très intéressantes et des résultats impressionnants. J'espère que l'équipe Shopify continuera à partager ces détails et peut-être verrons-nous certaines des solutions développées pendant ce processus devenir open source ?

---

- 💸 [React Universe Conf combine les meilleurs éléments de React Native EU avec un nouveau programme enrichi. Obtenez votre billet au prix le plus bas avant le 7 mars](https://www.reactuniverseconf.com/?utm_campaign=React_Universe_Conf&utm_source=email&utm_content=This_Week_in_React)
- 👀 [PR - RCTRootViewFactory](https://github.com/facebook/react-native/pull/42263) : Simplifie les intégrations brownfield sur iOS et vous évite de vous préoccuper des combinaisons Old Arch/New Arch/Bridge/Bridgeless.
- 🐦 [Glisser-déposer des fichiers d'autres applications dans votre app RN](https://x.com/alihdjr/status/1764393524940673529)
- 📖 [Documentation visionOS - Intégration dans des projets existants](https://callstack.github.io/react-native-visionos-docs/docs/guides/integrate-into-existing-projects/)
- 📜 [Expo - Orchestrer des workflows avancés avec des builds personnalisés](https://expo.dev/blog/orchestrate-advanced-workflows-with-custom-builds) : Les builds personnalisés vous permettent d'exécuter des scripts (bash ou JS) avant ou après les builds Expo, par exemple pour lancer des tests E2E, envoyer des notifications à votre équipe...
- 📜 [Activités en direct iOS et React Native - exploiter les dernières fonctionnalités iOS pour afficher les données les plus récentes de votre app sans l'ouvrir](https://www.reactnative.university/blog/live-activities-unleashed) : Beaucoup plus d'apps devraient utiliser les Live Activities ! Les devs RN rencontrent un obstacle car elles doivent être écrites en Swift. Cette série en 3 parties détaille toutes les étapes nécessaires.
- 📜 [Limites d'erreur React Native - Fonctionnalité, partielle et serveur](https://www.reactnative.university/blog/react-native-error-boundaries) : Les limites d'erreur restent sous-utilisées, pourtant chaque app React Native devrait en avoir au moins une (idéalement plus). Cet article explique pourquoi et comment.
- 📜 [Augmentez vitesse et sécurité avec les bibliothèques crypto natives](https://www.callstack.com/blog/increase-speed-and-security-with-native-crypto-libraries)
- 📜 [Résumé Morrow du rapport sur l'état de React Native 2023](https://www.themorrow.digital/blog/our-summary-of-the-state-of-react-native-2023-report)
- 📦 [Intercom-react-native 6.5 - Désormais avec plugin de configuration Expo](https://github.com/intercom/intercom-react-native/releases/tag/6.5.0)
- 📦 [Uni Stack - Starter React Native avec Expo, Prisma, tRPC](https://www.uni-stack.dev/)
- 📦 [Expo-foreground-actions - Lancer des actions qui continuent de s'exécuter pendant la période de grâce après changement d'app](https://github.com/Acetyld/expo-foreground-actions)
- 📦 [React Native 0.74.0 RC 2](https://github.com/facebook/react-native/releases/tag/v0.74.0-rc.2)
- 🎙️ [RNR 290 - L'enquête sur l'état de React Native avec Bartłomiej Bukowski](https://reactnativeradio.com/episodes/the-state-of-react-native-survey-with-bartomiej-bukowski)
- 🎙️ [Rocket Ship 32 - D'enseignant fauché à ingénieur logiciel avec Zach Taylor](https://podcast.galaxies.dev/episodes/032-from-broke-teacher-to-software-engineer-with-zach-taylor)
- 🎥 [Simon Grimm - Construire une app de dessin pour enfants avec React Native](https://www.youtube.com/watch?v=G5TjXRHoEno)
- 🎥 [notJust Dev - Créez votre propre blog avec React Native (pour Web & mobile)](https://www.youtube.com/watch?v=ewW6_baBXko)
- 📅 [Chain React Appel à conférenciers ouvert jusqu'au 3 mai 2024](https://sessionize.com/chain-react-2024/)
- 📅 [React Universe Conf 2024 - Tarif early bird se termine aujourd'hui](https://ti.to/RUC/react-universe-conf-2024)

---

## 🔀 Autre {#other}

- 💬 [Plan d'itération TypeScript 5.5 - nouvelles méthodes Set, fusion d'extensions de configuration](https://github.com/microsoft/TypeScript/issues/57475)
- 📜 [Effective TypeScript - La face cachée des prédicats de type](https://effectivetypescript.com/2024/02/27/type-guards/)
- 📜 [Deno - Présentation de JSR - le registre JavaScript](https://deno.com/blog/jsr_open_beta)
- 📜 [OpenJS lance une nouvelle collaboration pour améliorer l'interopérabilité des métadonnées des packages JavaScript](https://socket.dev/blog/openjs-improve-interoperability-of-javascript-package-metadata)
- 📜 [Open Web Advocacy - Apple recule sur la suppression des applications web, mais le combat continue](https://open-web-advocacy.org/blog/apple-backs-off-killing-web-apps/)
- 📜 [Top 8 des mises à jour récentes de V8 dans Node](https://blog.appsignal.com/2024/02/28/top-8-recent-v8-in-node-updates.html)
- 📦 [Fonctionnalités WebKit dans Safari 17.44 - CSS @scope, align-content](https://webkit.org/blog/15063/webkit-features-in-safari-17-4/)
- 📦 [Shiki-magic-move - Blocs de code animés en douceur](https://github.com/shikijs/shiki-magic-move)
- 📦 [Parcel 2.12 - Macros définies avec des attributs d'importation exécutés à la compilation](https://parceljs.org/blog/v2-12-0/)
- 📦 [Playwright 1.42 - étiquetage de tests, annotations des tests ignorés](https://github.com/microsoft/playwright/releases/tag/v1.42.0)

---

## 🤭 Divertissement {#fun}

[![alt](/emails/issues/176/meme.jpg)](https://twitter.com/sebastienlorber/status/1765373471645737153)

À plus ! 👋