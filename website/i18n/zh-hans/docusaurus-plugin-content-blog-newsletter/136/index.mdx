---
slug: /136
title: "This Week In React #136: Next.js, Signals, Bling, Suspense, Server Components, useSyncExternalStore, Expo, Reanimated, Metro..."
authors: [slorber]
date: 02-28-2023
---

大家好！

本周，围绕信号模型的争论仍在继续。Next.js 也迎来了重要更新，推出了全新的缓存系统，旨在优化无服务器边缘运行时上服务器组件的高性能使用。

React Native 领域同样活跃，包括 Expo 48、Expo Router 1.0、Expo Image 1.0、Reanimated 3.0 发布，以及 Metro 正式支持符号链接功能！

<!-- truncate -->

**💡 [在 Twitter 上查看本期简讯](https://slo.im/thread) - 可视化格式 🎨**

---

import Support from "@site/newsletter/_support.mdx";

<Support />

---

## 💸 赞助 {#sponsor1}

[![Suncel](/emails/issues/136/suncel.jpg)](https://suncel.io/)

**[构建可复用区块。加速内容发布。提升 Core Web Vitals 与 SEO 表现。](https://suncel.io/)**

**内容编辑者**：对于需要大量生产内容并注重 SEO 策略的企业，这将是改变游戏规则的工具。营销人员和编辑者无需复杂操作即可编辑发布页面，消除发布延迟实现即时上线。依托 Next.js 优化页面与图片，轻松达成完美 Core Web Vitals 评分。

**开发者优势**：与现有 Next.js 应用即插即用，使用 Suncel CMS 可享受以下特性：

- 使用 React 构建可复用区块
- 自动生成 SEO 元数据与站点地图（通过 SEO 模块实现）
- 在 React 中创建自定义配置
- 基于 React 的可定制管理后台
- 无需适配 CMS 的路由系统

**[访问 Suncel.io](https://suncel.io/)** | **[5分钟演示视频](https://www.youtube.com/watch?v=LUupLEZKp3w)**

---

## ⚛️ React {#react}

[![Next.js 13.2](/emails/issues/136/nextjs13.2.jpg)](https://nextjs.org/blog/next-13-2)

**[Next.js 13.2](https://nextjs.org/blog/next-13-2)**

本次更新包含 Vercel 团队曾预告的多项功能。全新 Metadata API 有效提升 SEO 能力，完美兼容 SSR 流式传输、服务器组件及 app 目录。路由处理程序采用直观设计：位置集中化，只需导出 HTTP 方法即可。特别值得关注的是 MDX 相关改进（Rust 编译器、服务器组件支持），这将显著提升 Next.js 内容站点的轻量化与运行效率。据理解，Next.js 现通过 TypeScript 代码生成步骤实现类型化链接（作为 TypeScript 插件的补充）。Turbopack 对 Webpack 加载器的兼容性将加速新打包工具的采用。

最令人惊喜的是直接集成到 `fetch()` 的缓存 API：功能类似 ISR 但实现更精细的组件级请求缓存，甚至包含标签系统。Next.js 保持可移植性：缓存可部署在自有基础设施或使用本地 LRU 缓存。当然，该功能针对 Vercel 部署进行了优化。专题文章详细解析了 ISR 模型的局限性：[Vercel 缓存 API：与 Next.js 集成的渐进式缓存](https://vercel.com/blog/vercel-cache-api-nextjs-cache)。另可参阅 [Sebastian Markbåge 的技术解析](https://twitter.com/sebmarkbage/status/1628845420121128965)。

---

[![JavaScript中信号的演进](/emails/issues/136/signals.jpg)](https://dev.to/this-is-learning/the-evolution-of-signals-in-javascript-8ob)

**[JavaScript中信号的演进](https://dev.to/this-is-learning/the-evolution-of-signals-in-javascript-8ob)**

本文由Ryan Carniato(SolidJS)撰写，追溯了前端领域中信号的发展历程，涵盖KnockoutJS、MobX及众多其他解决方案。

信号仍是本周热议话题。建议您亲自阅读Twitter上的大量讨论：

- Andrew Clark [阐明立场](https://twitter.com/acdlite/status/1628811935088013314)，并[对在React中引入信号持开放态度](https://twitter.com/acdlite/status/1626590880126889984)。React Forget编译器[可能编译为信号](https://twitter.com/acdlite/status/1628930249718202369)。
- Miško Hevery [解释](https://twitter.com/mhevery/status/1628556944318550016)信号如何避免属性钻取带来的性能问题。
- Evan You [倾向于](https://twitter.com/youyuxi/status/1629636673519894528)可理解的可变模型而非存在泄漏的不可变模型。
- Devon Govett [提醒](https://twitter.com/devongovett/status/1629540226589663233)"单向数据流"被采用的原因，并指出信号的若干问题。
- Jordan Walke [提及](https://twitter.com/jordwalke/status/1629663133039214593)创建React时曾考虑响应式模型，但因改变语言语义而放弃。
- Dan Abramov [阐述](https://twitter.com/dan_abramov/status/1629872956288512007)用户期望相同数据呈现相同界面，并[说明](https://twitter.com/dan_abramov/status/1629539600489119744)使用"原始值"（非包装容器）的价值。
- [我的观点](https://twitter.com/sebastienlorber/status/1630264713845039104)：基本认同React团队立场，认为需在当前模型持续创新，尽管信号短期颇具吸引力。期待JavaScript未来更好支持不可变模型，且React Forget编译器仅是过渡方案。

---

- 👥 [Matt Carroll](https://twitter.com/mattcarrollcode) + [Sean Keegan](https://twitter.com/DevRelSean): 2 DevRels recently joined the React team.
- 📜 [Module Extraction: The Silent Web Revolution](https://www.builder.io/blog/module-extraction-the-silent-web-revolution): React frameworks can already separate client/server code in the same module. But frameworks like Qwik go further and can even extract closures (including captured variables). Let's see if this idea scales well on big apps.
- 📜 [Why useEffect May Not Be the Best Abstraction](https://www.builder.io/blog/useeffect-not-the-best-abstraction): criticism of useEffect and comparison with Qwik code.
- 📜 [i18n translations in Next.js 13's app-dir for server/client components](https://aralroca.com/blog/i18n-translations-nextjs-13-app-dir):
  the author of Next-translate explains some difficulties encountered to release the v2 of his lib related to Server Components, but reports some interesting advantages like the reduction of the js bundle size.
- 📜 [React Is Holding Me Hostage](https://emnudge.dev/blog/react-hostage): a rather fair criticism of React that praises the merits of signals and a more reactive model.
- 📜 [useSyncExternalStore - First Look](https://julesblom.com/writing/usesyncexternalstore): ce hook est plus utile qu'il n'en a l'air, ne passez pas a coté!
- 📜 [Owncast v0.1.0 Retrospective - Frontend Web Rewrite](https://gabekangas.com/blog/2023/02/owncast-v0.1.0-retrospective-frontend-web-rewrite/): feedback on the switch from Preact to React/Next.js, including an interesting social outcome (more contributors).
- 📜 [How to avoid tricky async state manager pitfalls in React](https://evilmartians.com/chronicles/how-to-avoid-tricky-async-state-manager-pitfalls-react)
- 📜 [React Libraries for 2023](https://www.robinwieruch.de/react-libraries/)
- 📜 [Storybook 7 Docs](https://storybook.js.org/blog/storybook-7-docs/)
- 📦 [Suspense](https://github.com/bvaughn/suspense/): toolbox for React Suspense, Brian Vaughn's new project.
- 📦 [TanStack Bling](https://github.com/TanStack/bling/): new framework-agnostic project of the TanStack on which the next TanStack Start meta-framework should be based.
- 📦 [Forgetti](https://github.com/lxsmnsyc/forgetti): a dev doesn't want to wait for the React Forget compiler so he works on his own compiler.
- 📦 [TanStack Query v5.0.0-alpha.0](https://twitter.com/TkDodo/status/1630159547405877249): preview of upcoming v5 improvements: infinite query, optimistic updates, bundle size...
- 📦 [Tinasaurus - Edit your Docusaurus site with TinaCMS](https://tina.io/blog/tinasaurus-docusaurus-starter/): CMS that integrates well with Docusaurus and allows the use of MDX components.
- 📦 [Sonner - an opinionated toast component for React](https://twitter.com/emilkowalski_/status/1628742238548250624)
- 📦 [nodl - framework for visual node graphs](https://twitter.com/emilwidlund/status/1628877076424949760)
- 📦 [React Aria - February 2023 releases](https://twitter.com/devongovett/status/1629156091178131457)
- 📦 [Radix UI releases](https://twitter.com/radix_ui/status/1629120708054753281)
- 💬 [Chat about the future for stitches](https://github.com/stitchesjs/stitches/issues/1144)
- 🎙️ [Reactiflux Podcast - Behind the React Documentary with Ida Bechtle and Christopher Chedeau](https://anchor.fm/reactiflux)
- 🎥 [Signals For Solid, Qwik And React](https://www.youtube.com/watch?v=ZLMjJL70glE)

<SubscribeFormEmbed />

---

## 💸 赞助 {#sponsor2}

**[![构建和运行可扩展的合成监控](/emails/issues/134/checkly.jpg)](https://www.checklyhq.com/product/monitoring-as-code/?utm_medium=email&utm_source=newsletter&utm_campaign=this-week-in-react)**

**[构建和运行可扩展的合成监控](https://www.checklyhq.com/product/monitoring-as-code/?utm_medium=email&utm_source=newsletter&utm_campaign=this-week-in-react)**

"你构建它，你拥有它！"这个简单信条多年来驱动着软件开发。但如何以最佳方式监控复杂的React应用？

- 首先：使用Playwright模拟用户流程，确保应用正常工作
- 其次：确保使用的API正常运行

"代码即监控"是一种全新方式，可直接从代码中定义、测试和部署完整的应用监控

- 编写监控设置代码并保存在版本控制中
- 在预览环境中测试应用，避免错误和回归问题
- 部署测试并开始监控生产环境

[免费将监控融入代码工作流](https://www.checklyhq.com/product/monitoring-as-code/?utm_medium=email&utm_source=newsletter&utm_campaign=this-week-in-react)

## 📱 React-Native {#react-native}

[![Expo 48](/emails/issues/136/expo48.jpg)](https://blog.expo.dev/expo-sdk-48-ccb8302e231)

**[Expo 48](https://blog.expo.dev/expo-sdk-48-ccb8302e231)**

重要版本更新。包含测试版的主要功能：

- React Native 0.71.3 - React 18.2.0
- 来自React-Native的Yoga改进（Flexbox）
- 默认支持M1芯片的EAS构建器
- 默认启用Hermes引擎
- 所有Expo模块实验性支持Fabric

测试版后的更新：

- Expo Image 1.0 现已稳定
- Expo Router 1.0 现已稳定（[专题博客](https://blog.expo.dev/announcing-expo-router-v1-1d97d7833605)）

---

[![Reanimated 3.0](/emails/issues/136/reanimated3.jpg)](https://blog.swmansion.com/releasing-reanimated-3-0-17fab4cb2394)

**[Reanimated 3.0](https://blog.swmansion.com/releasing-reanimated-3-0-17fab4cb2394)**

Reanimated 3.0稳定版已发布，新增共享元素过渡功能（[演示](https://twitter.com/swmansion/status/1630590156255240193)）。现在可在行内样式中使用共享值。该库经过重写以提升性能、改善开发者体验，并为新功能做准备。兼容Fabric并保留Reanimated 2 API便于升级，但移除了Reanimated 1 API。

---

- 📜 [React Native App Clip：新功能与更小的应用体积](https://bndkt.com/blog/2023/react-native-app-clip-new-capabilities)
- 💬 [RFC：在 package.json 中引入 reactNativeMetadata](https://github.com/react-native-community/discussions-and-proposals/pull/588)：提议在 `package.json` 中添加元数据，适用于应用和库的多种场景。
- 💬 [RFC：懒打包](https://github.com/react-native-community/discussions-and-proposals/pull/605)：通过动态导入在开发环境中更快启动大型应用。
- 📦 [Metro 0.75.1](https://twitter.com/robjhogan/status/1628460899714449416)：实验性支持符号链接和 `package.json` 的 "exports"！
- 📦 [Restyle 2.4](https://github.com/Shopify/restyle/pull/220)：Shopify 样式库的多项性能优化。
- 📦 [Dank Style (alpha)](https://dank.style/)：面向 Next.js 和 React-Native 的全新通用样式库。
- 👀 [Expo + React-Native 服务端组件演示](https://twitter.com/Baconbrix/status/1629909713910480898)：Evan Bacon 刚刚发布了首个演示，证明该方案可行！
- 👀 [BottomSheet - 网页支持](https://twitter.com/gorhom/status/1627399052068282368)：PR 已合并，将在 v5 版本推出。
- ⚠️ [Fastlane - 立即更新以避免 Apple ID 账户被锁定](https://twitter.com/FastlaneTools/status/1629153901747265538)
- 🎙️ [The React Native Show, Coffee Talk #8 - React Native 现状](https://www.youtube.com/watch?v=jwfsMzLY5Cs)
- 🎥 [React Native 中使用 three.js 的 3D 动画入门指南](https://www.youtube.com/watch?v=5WNoynmnEAs)
- 🎥 [如何使用原生模块构建 Expo 库](https://www.youtube.com/watch?v=ZNE7Of3TZAY)

---

## 🧑‍💻 工作机会 {#jobs}

🧑‍💼 [**Passionfroot - 高级全栈工程师 (Remix) - €160k+, 柏林/远程**](https://passionfroot.recruitee.com/o/senior-fullstack-engineer)

Passionfroot 的使命是通过 YouTube、播客、社交媒体和通讯简报，赋能未来的独立企业。加入我们，共同构建赋能全球创作者建立可扩展、可持续业务的工具。

🧑‍💼 [**Callstack - 高级 React Native 开发工程师 - 完全远程, PLN 21-32k 净收入（B2B月结）**](https://www.callstack.com/senior-react-native-developer)

您想开发全球最流行的应用吗？您想共同塑造 React Native 技术吗？加入 Callstack 的 React & React Native 技术领导者团队。访问官网了解更多详情，我们期待您的申请——请尽情展示您的实力！

🧑‍💼 [**G2i - 100% 远程 React Native 职位**](https://twitter.com/gabe_g2i/status/1563204813881425926?s=20&t=ArRLC77BpRwXXCdx8fnUqw)

我们开放多个 React Native 开发职位！薪资约 $160k 加 10% 奖金。需具备 RN 生产环境经验且位于美国境内。私信 [@gabe_g2i](https://twitter.com/gabe_g2i) 了解详情，并请提及 This Week in React。

💡 [如何发布职位？](https://thisweekinreact.com/sponsor)

---

## 🔀 其他 {#other}

- [Babel 7.21](https://babeljs.io/blog/2023/02/20/7.21.0)：支持 TypeScript 5.0 + 装饰器
- [Angular v16.0.0-next.0](https://twitter.com/Enea_Jahollari/status/1628515124347654144)：信号机制
- [Deno 1.31](https://twitter.com/deno_land/status/1629123230492463106)
- [Vitest 0.29](https://twitter.com/sheremet_va/status/1629403679898972161)
- [Turborepo 1.8](https://twitter.com/turborepo/status/1628497786881597444)
- [Mock Service Worker 1.1](https://twitter.com/ApiMocking/status/1628909915111579650)
- [Bun 文档已发布](https://twitter.com/colinhacks/status/1629310598004772865)
- [SpiderMonkey - JavaScript 导入映射 - 介绍](https://spidermonkey.dev/blog/2023/02/23/javascript-import-maps-part-1-introduction.html)
- [Ezno 现已开源](https://twitter.com/kaleidawave/status/1629885949353009156)
- [样式查询入门指南](https://developer.chrome.com/blog/style-queries/)
- [Chrome 无头模式迎来重大升级！](https://developer.chrome.com/articles/new-headless/)
- [Safari 技术预览版 164](https://webkit.org/blog/13902/release-notes-for-safari-technology-preview-164/)
- [构建窃取一切的 Chrome 扩展](https://mattfrisbie.substack.com/p/spy-chrome-extension)

---

## 🤭 趣闻 {#fun}

[![alt](/emails/issues/136/meme.jpg)](https://twitter.com/trashh_dev/status/1629883957121781760)

下次见！👋