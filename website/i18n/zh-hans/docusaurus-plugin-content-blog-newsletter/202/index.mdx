---
slug: /202
title: "This Week In React #202: Next.js, Composition, search params, PPR, useActionState, content-visibility, Astro, MDX, Storybook, Priompt, Radon, Expo, MiniSim, CSS, Bun, Deno, Node.js..."
authors: [slorber]
date: 09-25-2024
---

大家好！

本周React/RN相关公告相对平静，但我们仍有优秀的博客文章和各种有趣的Next.js及CSS新闻。

<!-- truncate -->

**💡 [在Twitter查看本期通讯](https://slo.im/thread) - 可视化格式 🎨**

---

import Support from "@site/newsletter/_support.mdx";

<Support />

---

## 💸 赞助商 {#sponsor1}

[![AG Grid：全球最佳React数据表格](/emails/issues/202/aggrid.jpg)](https://www.ag-grid.com/react-table?utm_source=thisweekinreact&utm_medium=newsletter&utm_campaign=2024-email-1)

**[AG Grid：全球最佳React数据表格](https://www.ag-grid.com/react-table?utm_source=thisweekinreact&utm_medium=newsletter&utm_campaign=2024-email-1)**

AG Grid是一款快速、免费且完全可定制的React数据表格。被**财富500强中90%的企业**采用，**100%开源**，每月**npm下载量超过400万次**：

- 🆓 **免费：** 永久免费使用**排序**、**筛选**、**分页**、**单元格编辑**等数百项功能。
- **🚀 快速：** 开箱即可显示**数百万单元格**，且不影响性能。
- **🎨 可定制：** 向单元格、行和列添加自定义组件，使用**100多个CSS变量**设计每个元素。
- 🏢 **企业功能：** 购买许可证可终身使用高级功能，包括**透视表**、**分组**、**主从视图**和**内置图表**（由我们的React图表库[AG Charts](https://www.ag-grid.com/charts?utm_source=thisweekinreact&utm_medium=newsletter&utm_campaign=2024-email-1)驱动）。免费试用 - 无需试用许可证。

了解更多：[ag-grid.com](https://www.ag-grid.com/react-table?utm_source=thisweekinreact&utm_medium=newsletter&utm_campaign=2024-email-1)

---

## ⚛️ React {#react}

[![我如何构建个人博客](/emails/issues/202/josh.jpg)](https://www.joshwcomeau.com/blog/how-i-built-my-blog-v2/)

**[我如何构建个人博客](https://www.joshwcomeau.com/blog/how-i-built-my-blog-v2/)**

Josh Comeau分享了将高级博客（10万行代码）从Next.js Pages Router迁移到App Router的经验，反馈喜忧参半（Lighthouse评分降低，开发服务器变慢...）。这是一篇整体上引人入胜的React读物，呈现方式生动互动，不仅限于Next.js用户。包含涉及各种依赖项的细节：MDX、Shiki、Linaria、Framer-Motion...

---

[![组件组合非常棒](/emails/issues/202/composition.jpg)](https://tkdodo.eu/blog/component-composition-is-great-btw)

**[组件组合非常棒](https://tkdodo.eu/blog/component-composition-is-great-btw)**

Dominik阐述了React如何重新定义"关注点分离"概念，以及为何应优先采用组合和提前返回而非条件渲染多种状态。我也有相同体验：这种方式更有可能长期保持组件的可维护性。

---

- 💸 [React Component Analytics — Omlet Scans Your Codebase to Measure Component Usage to Increase Code Quality and Design Systems Adoption](https://omlet.dev/?utm_campaign=partner_this-week-in-react_newsletter-quick-link-aug-2024)
- 👀 [Next.js PR \- `@next/codemod upgrade` CLI](https://github.com/vercel/next.js/pull/69935): Next.js 15 will have a CLI to automatically upgrade your dependencies to the latest stable, RC, or canary, with the ability to run the appropriate breaking change codemods.
- 👀 [Next.js PR \- Update Dynamic APIs to be async](https://github.com/vercel/next.js/pull/68812): APIs like `cookies()`, `headers()`, `params` are going async in Next.js 15\. The PR is still WIP but [codemods have already been merged](https://github.com/vercel/next.js/pull/69572). The breaking change is not so well-received by the community but opens the way to upcoming innovations for the Next.js team.
- 🔐 [Next.js Cache Poisoning vulnerability](https://github.com/advisories/GHSA-gp8f-8m3g-qvj9): Only affects Page Router non-dynamic routes, fixed in 13.5.7 and 14.2.9
- 🧑‍🎓 [Vim for React Developers](https://vimforreactdevs.com/): Free pragmatic mini-course from Lee Robinson.
- 🧑‍🎓 [EpicReact v2 \- React 19 update](https://www.epicreact.dev/): Kent C. Dodds released a new version of his flagship React course (paid, currently 40% off).
- 🗓️ [React Summit US](https://reactsummit.us/?utm_source=Newsletter&utm_medium=thisweekinreact) - 🇺🇸 New-York - 19 & 22 December - [Free remote tickets are available now, click here !](https://gitnation.com/badges/react-summit-us-2024/addy_osmani?from=This+Week+In+React) 10% discount with code TWIR.
- 🗓️ [React Advanced London](https://reactadvanced.com/?utm_source=Newsletter&utm_medium=thisweekinreact) - 🇬🇧 London - 25 & 28 October - Hurry and grab your ticket to the conference as prices are about to go up ! And fon’t forget your discount with code “TWIR”.
- 📜 [How to control a React component with the URL](https://buildui.com/posts/how-to-control-a-react-component-with-the-url): This cool interactive blog post greatly illustrates a common antipattern among React devs using search parameters. You should consider the URL as the source of truth, instead of trying to sync your state to the URL.
- 📜 [Partial Prerendering for Everyone with Cloudflare Workers](https://sunilpai.dev/posts/ppr-for-everyone/): Former React team member Sunil Pai shared a demo of implementing PPR from scratch outside of Next.js, using React `prerender()`, `postpone()` and `resumeToPipeableStream()`. These are very experimental APIs that may change, don’t do this at home and only use this for learning/curiosity.
- 📜 [CSS `content-visibility` for React devs](https://dev.to/sebastienlorber/css-content-visibility-for-react-devs-4a3i): I aggregated a few interesting tweets/links explaining why React devs should care about this new CSS property that can improve your app rendering performance. It’s now in all browsers and although not widely supported, can be a progressive enhancement. You could use it as a replacement or alongside a React virtualization library to improve performance and accessibility.
- 📜 [HTMX Essay \- You Can't Build Interactive Web Apps Except as Single Page Applications... And Other Myths](https://htmx.org/essays/you-cant/): An interesting read debunking myths and explaining what’s possible to do without an SPA framework like React. The gap between MPAs and SPAs is getting thinner thanks to modern technologies: Service Workers, View Transitions, Speculation Rules…
- 📜 [How to fetch data in React](https://www.robinwieruch.de/react-fetching-data/): Robin Wieruch refreshed his data fetching overview post listing modern 2024 practices using React Query, useEffect, use(), RSC, and tRPC.
- 📜 [Efficient Refresh Token Implementation with React Query and Axios](https://dev.to/elmehdiamlou/efficient-refresh-token-implementation-with-react-query-and-axios-f8d): Uses Axios interceptors to automatically add an `Authorization` header and React Query `onError` callback to refresh expired tokens and retry the query/mutation.
- 📜 [How to reset the state of useActionState in React](https://www.nico.fyi/blog/reset-state-from-react-useactionstate): Resetting the action state is surprisingly tricky.
- 📜 [From Parcel to Vite: A short story of a 100K LOC migration](https://blog.logto.io/parcel-to-vite): Logto migrated a React frontend to Vite and shared integration details on various React-related features: MDX, SVGR, `React.lazy`, Fast Refresh…
- 📜 [Astro Content Layer \- A Deep Dive](https://astro.build/blog/content-layer-deep-dive/)
- 📦 [Storybook 8.3](https://storybook.js.org/blog/storybook-8-3/): Includes a first-class Vitest integration that makes Component Testing x6 faster, and a better integration with Next.js projects.
- 📦 [Priompt \- JSX-based prompt design library](https://www.cursor.com/blog/prompt-design): I missed that AI prompting library released last year by a Cursor dev.
- 📦 [next-view-transitions 0.3.2 \- useTransitionRouter API](https://x.com/shuding_/status/1838000183356850240)
- 📦 [Legend-State 3.0 beta \- Signal-based state library \- Improves on computed observables, persistence, sync](https://www.legendapp.com/open-source/state/v3/)
- 📦 [Vaultusaurus \- Tools to integrate an Obsidian Vault with a Docusaurus site, including a graph view](https://github.com/chanjunren/vaultusaurus)
- 🎥 [Jack Herrington \- I hacked ShadCN to Create Insane React Templates and Installers](https://www.youtube.com/watch?v=NP2ULDZxpd0): The CLI can be hijacked by writing/generating your own JSON update files.
- 🎥 [Theo \- The React "head" Drama…](https://www.youtube.com/watch?v=qmM91SnSw8w): React 19 won’t deduplicate `<title>` tags for you and you still may want to use a lib like React Helmet.
- 🎥 [ThePrimeTime \- Remix's Concurrent Submissions Are Fundamentally Flawed](https://www.youtube.com/watch?v=Tvms2DaG8UY)
- 🎙️ [Frontend First 196 \- Tom Occhino on the future of React](https://www.youtube.com/watch?v=ktO2OqwvgEs): A look back at the many years of innovation at Facebook that led to the creation of RSC and Partial Prerendering as a North Star. From BigPipe to GraphQL/Relay to RSC.
- 🎙️ [PodRocket \- TanStack and TanRouter with Tanner Linsley](https://podrocket.logrocket.com/tanstack-tanrouter-tanner-linsley)
- 🎙️ [Syntax.fm 824 \- Taylor Otwell's opinions on PHP, React, Laravel and Lamborghini Memes](https://syntax.fm/show/824/taylor-otwell-s-opinions-on-php-react-laravel-and-lamborghini-memes)

<SubscribeFormEmbed placement="middle" />

---

## 💸 赞助商 {#sponsor2}

[![准备好自动化您的数据提取了吗？](/emails/issues/202/apryse.jpg)](https://apryse.com/capabilities/extraction?utm_source=thisweekinreact&utm_medium=newsletter&utm_campaign=0815)

**[准备好自动化您的数据提取了吗？](https://apryse.com/capabilities/extraction?utm_source=thisweekinreact&utm_medium=newsletter&utm_campaign=0815)**

Apryse IDP 简化了从 PDF 中提取数据的过程。轻松以高精度和最少配置从财务报告或患者记录中提取详细信息。我们的 AI 技术能从各类文档中提取文本、表格和表单，减少人工工作量并提升数据质量。

[立即开始。](https://apryse.com/capabilities/extraction?utm_source=thisweekinreact&utm_medium=newsletter&utm_campaign=0815)

---

## 📱 React-Native {#react-native}

- 💸 [Sonny Sangha - 使用 React Native 构建 Zoom 2.0 克隆版](https://go.clerk.com/jBpMIuk)
- 🐦 [React-Native-WebGPU 在 macOS 上的演示](https://x.com/SaadNajmi/status/1838295375700201720)
- 🐦 [Tzvetan Mikov 关于为 Hermes 添加 Wasm 支持的有用性讨论](https://x.com/tmikov/status/1837600409386734037)
- 📊 [React Native 基准测试](https://dream-sports-labs.github.io/rn-benchmarking/)：这个有趣的网站允许我们根据版本、架构和平台（iOS/Android）比较 React Native 的性能
- 🗓️ [RNLConf](https://www.reactnativelondon.co.uk/?utm_source=thisweekinreact) - 🇬🇧 伦敦 - 11月14日至15日 - 使用代码 "TWIR" 可享受 10% 折扣，立即购票！
- 📜 [React Native IDE 现更名为 Radon IDE](https://blog.swmansion.com/react-native-ide-is-now-radon-ide-cfbdad77d43c)：简而言之，这只是一个出于实际原因的名称变更。不过阅读他们选择该名称的原因也很有趣（提示：原子，钋）
- 📜 [如何在 React Native 中监听未捕获/未处理的错误](https://andrei-calazans.com/posts/how-to-global-catch-errors/)：使用 `globalThis.ErrorUtils.setGlobalHandler()`
- 📜 [如何逐步采用 Expo](https://expo.dev/blog/how-to-incrementally-adopt-expo)
- 📦 [MiniSim 0.9 - 支持物理设备](https://github.com/okwasniewski/MiniSim/releases/tag/v0.9.0)
- 📦 [React Native 0.76.0-rc.2](https://github.com/facebook/react-native/releases/tag/v0.76.0-rc.2)
- 🎥 [Simon Grimm - 为什么 React Native 3D 不再糟糕了](https://www.youtube.com/watch?v=msErROjFY08)
- 🎙️ [React Universe On Air - Coffee Talk 21 - 如何在 React 中开始使用 3D](https://www.youtube.com/watch?v=Olh_sE0BL1s)
- 🎙️ [Rocket Ship 50 - 新架构、JSI、原生模块和 Rust 与 Oscar Franco](https://share.transistor.fm/s/01c99662)
- 🎙️ [RNR 308 - Chris Ferdinandi 谈编程与注意力缺陷多动障碍（ADHD）](https://www.reactnativeradio.com/episodes/rnr-308-coding-and-adhd-with-chris-ferdinandi)

---

## 🔀 其他 {#other}

- 👀 [CSS 值与单位第 5 级 - 首个公开工作草案](https://www.w3.org/blog/CSS/2024/09/13/css-values-5-fpwd/)
- 👀 [CSS 网格布局第 3 级 / 瀑布流布局 - 首个公开工作草案](https://www.w3.org/blog/CSS/2024/09/24/css-grid-3-fpwd/)
- 🐦 [Web Preference API 已并入 CSS 媒体查询草案规范](https://x.com/sebastienlorber/status/1836698597548593350)
- 📜 [企业环境中正确使用 Node.js 的 9 条原则](https://www.platformatichq.com/node-principles)
- 📜 [在 CSS 中实现 height: auto;（以及其他固有尺寸关键字）的动画](https://developer.chrome.com/docs/css-ui/animate-to-height-auto/)
- 📜 [为何类型化 Linting 如今需要 TypeScript](https://www.joshuakgoldberg.com/blog/why-typed-linting-needs-typescript-today/)
- 📦 [Bun 1.1.28 - 在 JavaScript 中编译并运行 C 语言，修复 React 19 SSR](https://bun.sh/blog/compile-and-run-c-in-js)
- 📦 [ts-blank-space - 将 TypeScript 转换为 JavaScript 的快速类型剥离编译器](https://bloomberg.github.io/ts-blank-space/)
- 📦 [Deno 2.0 候选发布版](https://deno.com/blog/v2.0-release-candidate)
- 📦 [模块联邦 Vite 1.0](https://www.learnbydo.ing/diary/2024-09-23-module-federation-vite-v1)

---

## 🤭 趣事 {#fun}

[![alt](/emails/issues/202/meme.jpg)](https://x.com/Nateemerson/status/1836537823027134744)

[![alt](/emails/issues/202/meme2.jpg)](https://x.com/laszek44/status/1832024709887631384)

[![alt](/emails/issues/202/meme3.jpg)](https://x.com/jarredsumner/status/1836438965664256399)

再见！👋