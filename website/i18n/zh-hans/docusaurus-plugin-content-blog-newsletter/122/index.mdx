---
slug: /122
title: "This Week In React #122: Next.js 13, Turbopack, Remixing Shopify, React-Three-Fiber Journey, Gatsby Valhalla, Expo 47, Rive, Storybook, Asta..."
authors: [slorber]
date: 11-01-2022
---

大家好！

这真是充满曲折的一周！

- Next.js 13 让我们能够使用 React 的最新创新
- Turbopack 可能会取代 Webpack
- Shopify 收购了 Remix
- Gatsby 将发布 v5 版本，并使其数据层与框架无关
- Expo 的 SDK 47 非常有前景

另外，不要错过 Three.js Journey 课程的重大更新，其中包含 React-Three-Fiber 模块。我为这次发布准备了促销代码 ["TWIR"](https://threejs-journey.com/join/TWIR)。这将是未来我将创建的"优惠"页面上展示的第一门课程。

我正在测试一种新格式！这比平时花费了更多时间 😅。如果您想支持我继续这样做，我将非常感谢您的 [转发](https://slo.im/thread)、推荐或介绍给朋友 🙏。订阅者越多，我就有更多机会改进它。

<!-- truncate -->

**💡 [在 Twitter 上查看本期通讯](https://slo.im/thread) - 视觉格式 🎨**

---

import Support from "@site/newsletter/_support.mdx";

<Support />

---

## 💸 赞助商 {#sponsor1}

[![Sizzy - the browser for developers](/emails/issues/220/sizzy.jpg)](https://sizzy.co/?utm_campaign=newsletter&utm_source=thisweekinreact)

为什么其他行业的专业人士都有专用工具，而 Web 开发者却还在用他们祖母在亚马逊购物时使用的浏览器？

如果你在除 Sizzy 之外的任何其他浏览器中打开 localhost:3000，那你就是在浪费宝贵的时间。

**使用 Sizzy 之前：** Web 开发让你压力山大，响应式设计困难重重，打开的标签页和应用数量多得让你不知所措。

**使用 Sizzy 之后：** 所有需要的工具都集中在一处，响应式设计轻而易举，无需再切换上下文。

你可以[在此处下载](https://sizzy.co/?utm_campaign=newsletter&utm_source=thisweekinreact)，并免费试用 14 天！

---

## ⚛️ React {#react}

[![Next.js 13 keynote slide](/emails/issues/122/nextjs13.jpg)](https://nextjs.org/blog/next-13)

**[Next.js 13 - 动态无极限](https://nextjs.org/blog/next-13)**

此新版本的 Next.js 在测试版中引入了新的路由系统和嵌套布局。迁移是渐进式且可选的：您需要将 Next.js 页面移至新的 `app/` 文件夹。这启用了最新的创新，例如 React Server Components 以及在 Edge 和 Node.js 运行时上的 SSR 流式支持。

⚡️ 其他重要改进：

- Turbopack：一个新的 Rust 打包工具（alpha 版，详情见下文）
- next/image：新的更轻量、灵活、更快的图像组件，避免布局偏移
- @next/font：高效自托管字体并避免布局偏移（另见上周介绍的 [Fontaine](https://twitter.com/danielcroe/status/1586472544491950080)）

💬 评论：

- [Dan Abramov](https://twitter.com/dan_abramov/status/1585076899126345728) 对此次发布感到兴奋，认为它为实现React的目标架构提供了具体实现
- [Andrew Clark](https://twitter.com/acdlite/status/1585029529361612801) 解释了他颇具争议的观点"Next.js 13才是真正的React 18发布"
- [Matt Kane](https://twitter.com/ascorbic/status/1585004156615479296) 认为React与Next.js绑定过深
- [Zach Leatherman](https://twitter.com/zachleat/status/1584995586918731776) 指出Next.js 13的Hello World示例仍包含过多JavaScript代码

🔗 有用的链接：

- 🎥 [Next.js大会主题演讲](https://www.youtube.com/watch?v=NiknNI_0J48)
- 🎥 [Fireship - Next.js 13...这将改变一切](https://www.youtube.com/watch?v=_w0Ikk4JY7U)
- 🧵 [Next.js升级指南 - 可视化线程](https://twitter.com/shadcn/status/1584971527820541953)

---

[![Turbopack主题演讲幻灯片](/emails/issues/122/turbopack.jpg)](https://vercel.com/blog/turbopack)

**[推出Turbopack：基于Rust的Webpack继任者](https://vercel.com/blog/turbopack)**

Vercel聘请了Tobias Koppers（Webpack创建者）开发Turbopack，这是一个基于Rust的新型高速打包工具。目前该工具处于alpha阶段，主要支持Next.js，功能有限。未来将增加对其他框架（Svelte、Vue...）和功能（Tailwind...）的支持。

Turbopack针对开发者体验进行了优化，Vercel宣称该工具比Webpack快700倍，比Vite快20倍。它基于Turbo（一个Rust记忆化框架），能够独立缓存每个函数的结果。Vercel还发布了包含更详细基准测试的[文章](https://turbo.build/blog/turbopack-benchmarks)。

💬 评论：

- [Jared Palmer](https://twitter.com/jaredpalmer/status/1584971637694222336) 解释了缓存机制及Turborepo/Turbopack可能合并
- [Evan You](https://twitter.com/youyuxi/status/1585040261922820096) 质疑基准测试结果，创建了[Turbopack真的比Vite快10倍吗？](https://github.com/yyx990803/vite-vs-next-turbo-hmr/discussions/8)讨论页
- [Sebastian McKenzie](https://twitter.com/sebmck/status/1584971938786861056) 指出冷启动性能提升有限（约4倍），可能因缓存初始化开销导致
- [Devon Govett](https://twitter.com/devongovett/status/1585035737971724288) 提到其架构与Parcel类似
- [Amjad Masad](https://twitter.com/amasad/status/1585001646782033921) 指出React-Native的Metro打包器长期使用类似缓存系统

---

[![Remix与Shopify融合](/emails/issues/122/remixing.jpg)](https://shopify.engineering/remix-joins-shopify)

**[Remix加入Shopify共同推动Web发展](https://shopify.engineering/remix-joins-shopify)**

Remix已加入Shopify，将用于其Hydrogen电商元框架及其他项目。Hydrogen 2.0将用Remix API取代React Server Components！他们发现Remix模型比Server Components更易理解且功能更强大。

在我看来，这是一次非常成功的收购。Shopify 可以专注于 Hydrogen 的价值主张，而不是基础设施问题，同时受益于 Remix 的渐进式增强功能——这对电子商务尤为重要。更值得一提的是 Remix 与 React 解耦，而 Shopify 正在开发框架无关的 [Hydrogen UI](https://github.com/Shopify/hydrogen-ui) 库：Shopify 将能触达不同框架（Vue、Svelte 等）的开发者，无需强制使用 React，同时依托共享基础设施。

💬 评论：

- [Josh Larson](https://twitter.com/jplhomer/status/1587095536833859584) 参与了 Hydrogen v1 开发，列举了遇到的挑战，并肯定了 React Server Components 的价值——其在 Next.js 13 中的实现优于 Hydrogen v1。
- [Ryan Florence](https://twitter.com/ryanflorence/status/1587171069915385856) 表示 Shopify 并不反对 Server Components，未来可能会在 Remix 中重新引入。
- [Ryan Florence](https://twitter.com/ryanflorence/status/1587090973594558464) 解释此次收购将使他们能全力投入 Remix 开发。
- [Guillermo Rauch](https://twitter.com/rauchg/status/1587104330053664768) 认为前端应与无头后端解耦。[Anthony Frehner](https://twitter.com/frehner_a/status/1587107928099651586) 回应称 Hydrogen UI 即将支持 Next.js。

🔗 实用链接：

- 📜 [Hydrogen 路线图](https://hydrogen.shopify.dev/roadmap/) 已更新，包含更多技术细节。
- 📜 [Remixing Shopify](https://remix.run/blog/remixing-shopify)：Remix 团队公告，该框架将保持为独立于电商用途的开源 React 框架。
- 🎥 [Fireship - 当你的 JavaScript 框架被收购时](https://www.youtube.com/watch?v=HleppfVh8jc)

---

[![Three.js Journey 转向 React](/emails/issues/122/r3f.jpg)](https://twitter.com/bruno_simon/status/1585222892769497089)

**[Three.js Journey 转向 React](https://twitter.com/bruno_simon/status/1585222892769497089)**

Three.js Journey 是学习使用 Three.js 创建 Web 3D 场景的权威课程。Bruno Simon 近期发布了 24 小时新增视频内容，基于为 Three.js 提供声明式模型的 [React-Three-Fiber](https://github.com/pmndrs/react-three-fiber)。3D 技术正融入我们的应用：如果你想突破表单和业务应用的局限，现在正是学习的好时机。我也[正在学习该课程](https://github.com/slorber/react-three-fiber-journey)，收获颇丰！

Bruno 提供了限时优惠码 ["TWIR"](https://threejs-journey.com/join/TWIR)，未来 10 天可享 -30% 折扣（或立减 66 美元）。此非赞助内容：我认为这门课程非常出色，更新后对 React 开发者更具实用性。

我计划近期创建优惠页面，收录其他优质课程（本人不从中获利）。欢迎告诉我你最感兴趣的课程，以便我联系其作者！

---

- 🤔 [React 核心 - 添加 fetch 插装以去重请求](https://github.com/facebook/react/pull/25516)：对 `fetch` 进行猴子补丁是[有争议的](https://github.com/facebook/react/issues/25573)。
- 💬 [RFC - TypeScript + React - 允许函数组件渲染任何内容](https://github.com/DefinitelyTyped/DefinitelyTyped/pull/62876)
- 📜 [全栈组件](https://www.epicweb.dev/full-stack-components)：Kent C. Dodds 解释说，Remix 允许创建真正的全栈组件，这些组件将前端和后端代码封装在同一个文件中。Remix 的全栈模式不仅限于路由，还可以通过 `useFetcher` 钩子用于微交互：例如按钮、自动补全...
- 📜 [React 应用中 Rive 动画的优化技术](https://pixelpoint.io/blog/rive-react-optimizations/)：Rive 是一个比 Lottie 更高效的动画库。Alex 解释了如何在 Gatsby 或 Next.js 应用中优化 Rive 动画的加载：自托管 WASM 运行时、Webpack 加载器、预加载、懒加载... 这些优秀技术可在其他场景中复用。
- 📜 [立即在 Netlify 上部署 Next.js 13](https://www.netlify.com/blog/deploy-nextjs-13/)：Netlify 提供了对最新 Next.js 13 创新的支持。
- 📜 [使用 Storybook 测试运行器实现代码覆盖率](https://storybook.js.org/blog/code-coverage-with-the-storybook-test-runner/)：全面总结了 Storybook 的测试功能。借助 [Istanbul](https://istanbul.js.org/) 插装，现在可以生成覆盖率报告，且报告格式可配置。
- 📜 [Gatsby Slice API：高精度增量构建](https://www.gatsbyjs.com/blog/gatsby-slice-api/)：解释了新的 Gatsby 5 API 如何提升布局组件（页眉、页脚）更新时的构建性能。
- 📜 [预填充查询缓存](https://tkdodo.eu/blog/seeding-the-query-cache)：描述了 React-Query 在使用 Suspense 时可能出现的瀑布流问题。建议在组件挂载前使用 `prefetchQuery` 以最大化加载优化，并展望了 React-Query 与最新 React 特性的集成方向。
- 📜 [使用 Fresh 构建博客](https://deno.com/blog/build-a-blog-with-fresh)：Fresh 是基于 Deno 的 Preact 框架
- 📦 [Gatsby 5](https://twitter.com/GatsbyJS/status/1587136776828772353)：新版本将于今日发布！[Gatsby Valhalla 内容中心](https://twitter.com/GatsbyJS/status/1587489648397410320)将支持在其他框架中使用 Gatsby 的 GraphQL 数据层！
- 📦 [Docusaurus 2.2](https://twitter.com/docusaurus/status/1586347397667495936)：支持 Mermaid 图表
- 📦 [Asta](https://github.com/yisar/asta)：新的可恢复 SSR 框架，灵感来自 Qwik 和 Marko，采用类 React 语法。持续演进中！
- 📦 [TanStack Query 4.14](https://twitter.com/TkDodo/status/1587411685517697028)：新增 ESLint 插件
- 📦 [Remix Forms 1.0](https://twitter.com/danielweinmann/status/1587465389990084609)
- 📦 [Downshift 7.0](https://github.com/downshift-js/downshift/releases/tag/v7.0.0)

<SubscribeFormEmbed />

---

## 💸 赞助商 {#sponsor2}

[![Sunsama - 数千名软件工程师如何保持高效工作而不倦怠](/emails/issues/121/sunsama.jpg)](https://www.sunsama.com/a/this-week-in-react)

**[数千名软件工程师如何保持高效工作而不倦怠](https://www.sunsama.com/a/this-week-in-react)**

你知道工作成果比投入的时间更重要。**[Sunsama](https://www.sunsama.com/a/this-week-in-react)** 已成为数千名开发者的内部秘诀，他们借此减少工作时间却取得更大成就。

通过其 JIRA、Github 和 Notion 集成，告别无止尽的标签切换。为每日设定时间盒，为爱好和副业项目创造空间。

最棒的是？他们提供 **[14 天免费试用](https://www.sunsama.com/a/this-week-in-react)**（无需信用卡），让你即刻开始取得更大成就。

---

## 📱 React-Native {#react-native}

[![Expo SDK 47 beta 现已推出](/emails/issues/122/expo47.jpg)](https://blog.expo.dev/expo-sdk-47-beta-is-now-available-fa760eea1908)

**[Expo SDK 47 beta 现已推出](https://blog.expo.dev/expo-sdk-47-beta-is-now-available-fa760eea1908)**

新版 Expo SDK 已开放为期一周的 beta 测试。主要更新包括：

- 升级至 React-Native 0.70.4 和 React 18.1
- iOS 版 Expo Go 支持 Hermes 引擎。从 SDK 48 起 Hermes 将成为默认 JS 引擎
- 多个 Expo 模块支持 Fabric 架构
- Expo Modules API 1.0：支持用 Swift/Kotlin 轻松创建原生 Fabric 模块
- React Navigation 文件系统路由功能进入 beta 阶段。最新版本 [v0.0.34](https://twitter.com/Baconbrix/status/1587303631602307076) 兼容 SDK 47

我们将在下周提供更多细节，但这显然是一个包含多项亮眼新功能的重要版本！

---

- 💡 [Andrew Clark："我希望有朝一日 Expo 能采用服务端组件。我们真的应该为 React-Native 实现服务端组件..."](https://twitter.com/Baconbrix/status/1585058874864062466)：我对服务端组件在 React-Native 中的应用[关注已久](https://twitter.com/sebastienlorber/status/1470810351197433863)，非常高兴终于有人"正式"公开提及此事！
- 📦 [React-Native-Gesture-Handler 2.8](https://github.com/software-mansion/react-native-gesture-handler/releases/tag/2.8.0)
- 📦 [React-Native-Fast-Shadow](https://github.com/alan-eu/react-native-fast-shadow)
- 🐦 [React-Native Android 提升构建速度 + 新增 `--active-arch-only` 标志](https://twitter.com/o_kwasniewski/status/1585270027942502404)
- 📜 [Stripe Identity：简化的身份认证方案](https://www.callstack.com/blog/stripe-identity-id-authentication-made-simple)
- 📜 [React Native - 现有应用集成指南 - Android](https://michalchudziak.dev/blog/integration-with-existing-apps-android)
- 📜 [React Native - 现有应用集成指南 - iOS](https://michalchudziak.dev/blog/integration-with-existing-apps-ios)
- 🎙️ [The React Native Show #17 - React Native 新架构](https://www.callstack.com/podcasts/react-native-new-architecture-ep-17)
- 🎙️ [The React Native Show 播客：Coffee Talk #6 - Webpack & Callstack 专家解读 Next.js Conf](https://www.callstack.com/podcasts/webpack-callstack-experts-take-on-next-js-conf-coffee-talk-6)
- 🎙️ [RNR 250 - React Native Firebase](https://reactnativeradio.com/episodes/rnr-250-react-native-firebase-tl-dr)
- 🔗 [React Native 社区生态图](https://lifeiswhat.notion.site/The-React-Native-Community-Map-07f3221c294d4c8ab65a13cf1dee6901)
- 🗣 [Wix Engineering - 现正式成为 React Native 合作伙伴](https://www.wix.engineering/post/wix-engineering-now-an-official-react-native-partner)

---

## 🧑‍💻 职位 {#jobs}

🧑‍💼 [**Causal 产品工程师，远程/伦敦/纽约，$150-250k**](https://jobs.lever.co/causal-app/4acaafbe-ef3d-45a6-bbe6-687c022d727c?lever-origin=applied&lever-source%5B%5D=thisweekinreact.com)

Causal 是 A 轮初创公司（获 Coatue/Accel 投资），致力于构建一体化数字处理与数据可视化工具。我们正在寻找能解决复杂 UX/性能挑战的资深 React 工程师。

🧑‍💼 [**G2i - 100% 远程 React Native 职位**](https://twitter.com/gabe_g2i/status/1563204813881425926?s=20&t=ArRLC77BpRwXXCdx8fnUqw)

我们开放多个 React Native 开发职位！薪资约 $160k 加 10% 奖金。需具备 RN 生产环境经验且位于美国境内。私信 [@gabe_g2i](https://twitter.com/gabe_g2i) 了解详情，并请注明通过 This Week in React 获悉。

💡 [如何发布招聘信息？](https://thisweekinreact.com/sponsor)

---

## 🔀 其他 {#other}

- [Babel 7.20](https://babeljs.io/blog/2022/10/27/7.20.0)：支持 Deno 目标和 TS 4.9 的 `satisfies` 语法！
- [TypeScript 4.9 RC 发布公告](https://devblogs.microsoft.com/typescript/announcing-typescript-4-9-rc/)：支持 `satisfies` 语法！
- [Node v18.12.0 (LTS)](https://nodejs.org/en/blog/release/v18.12.0/)：首个 v18 LTS 版本
- [开源全新的 TypeScript 类型检查器](https://kdy1.dev/posts/2022/10/open-sourcing-stc)：swc 的作者开源了他的类型检查器 stc，该工具最终将用 Rust 编写。
- [npm v9.0.0](https://github.blog/changelog/2022-10-24-npm-v9-0-0-released/)
- [Vercel 收购 Splitbee 以扩展第一方分析功能](https://vercel.com/blog/vercel-acquires-splitbee)
- [Deno 1.27：重大 IDE 改进](https://deno.com/blog/v1.27)
- [Chrome 108 beta](https://developer.chrome.com/blog/chrome-108-beta/)
- [Vite 3.2](https://twitter.com/vite_js/status/1585261680841424897)
- [Vite 的实验性开发服务器持久缓存](https://twitter.com/Akryum/status/1585769403781505024)
- [两种 JavaScript](https://remysharp.com/2022/10/13/two-javascripts)

---

## 🤭 趣闻 {#fun}

[![Next.js 13 - 1299 美元价格 - 苹果风格的主题演讲恶搞](/emails/issues/122/meme.jpg)](https://twitter.com/thekitze/status/1584974847306002432)