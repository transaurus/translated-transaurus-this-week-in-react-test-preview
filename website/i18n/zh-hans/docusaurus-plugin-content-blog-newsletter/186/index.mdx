---
slug: /186
title: "This Week In React #186: React Conf, Compiler, Universal RSC, React-Router, Google Maps, Million Lint, Pigment, Restyle, Storybook, SSRF, Inline Styles, New Arch, Expo, Bootsplash, Skia, RN-Video..."
authors: [slorber, bndkt]
date: 05-22-2024
---

大家好！

这周我们真是忙得不可开交😄。React Conf 果然没让人失望！虽然我们没到场，但[我们的宣传单可露脸了](https://x.com/sebastienlorber/status/1790771155734839313)😇。不仅有重磅会议公告（尤其是编译器！），社区还涌现了大量优质文章，我不得不把其中几篇推迟到下周发布。

而且接下来也不太可能消停，因为两大会议明天就要开幕：

- Vercel Ship 大会，预计将[发布 Next.js 15](https://x.com/feedthejim/status/1792969159321723244)，包含更温和的缓存策略、开发环境集成 Turborepo、编译器支持等特性
- App.js Conf 大会，同样预计有重磅 React Native 公告

祝阅读愉快，我们下周见！

<!-- truncate -->

**💡 [在 Twitter 查看本期简讯](https://slo.im/thread) - 视觉版 🎨**

---

import Support from "@site/newsletter/_support.mdx";

<Support />

---

## 💸 赞助商 {#sponsor1}

[![React-admin：面向 B2B 应用的开源框架](/emails/issues/182/marmelab.jpg)](https://marmelab.com/react-admin/)

**[React-admin：面向 B2B 应用的开源框架](https://marmelab.com/react-admin/)**

使用这款备受赞誉的前端框架🚀加速单页应用开发。基于 TanStack Query、react-hook-form、react-router 和 Material UI 构建，React-admin 让你能在 REST 或 GraphQL API 基础上创建丰富的用户体验。

除了 CRUD 页面，React-admin 还提供诸多高级功能满足需求。完整工具包包含日历 **📅**、可定制看板、内容版本控制 **🔄**、嵌套表单等。通过无头钩子和可主题化组件，实现实时更新 🎥、树形结构 **🌲** 及详细审计日志。

准备提升开发水平？让 React-admin 成为你的首选框架，加入每日超 50 万用户行列。[立即试用](https://marmelab.com/react-admin/)！

---

## ⚛️ React 技术 {#react}

[![React Conf 2024 回顾](/emails/issues/186/recap.jpg)](https://react.dev/blog/2024/05/22/react-conf-2024-recap)

**[React Conf 2024 回顾](https://react.dev/blog/2024/05/22/react-conf-2024-recap)**

React 团队及时发布了会议回顾博客🤗，涵盖所有演讲和主要公告。我虽未全部看完，但目前的亮点包括：

- React 19 已进入 RC 阶段，稳定版预计未来几周发布
- React 编译器正式推出且功能强大
- 通用 React 服务器组件将登陆 Expo，演示效果惊艳
- Remix 与 React Router 正在合并，Remix v3 将成为 React Router v7
- 实时 React 服务器组件演示使 RSC 具备状态能力，开辟了类似 Phoenix LiveView 的新可能
- React 现在协调 HTML 标签，这项能力被严重低估

再次强调这些仅是我的个人偏好。我们已在简讯中覆盖了大部分 React 19 特性，而[React 19 测试版博客](https://react.dev/blog/2024/04/25/react-19)仍是了解下个主要版本所有新功能的权威参考。

---

[![React 编译器](/emails/issues/186/compiler.jpg)](https://react.dev/learn/react-compiler)

**[React 编译器已发布](https://react.dev/learn/react-compiler)**

编译器确实值得单独开一个专栏。简而言之：该编译器会自动优化你现有的代码，并通过常规的 JS 值提供细粒度的响应性。尝试 [React Compiler Playground](https://playground.react.dev/#N4Igzg9grgTgxgUxALhAgHgBwjALgAgBMEAzAQygBsCSoA7OXASwjvwFkBPAQU0wAoAlPmAAdNvhgJcsNgB5CTAG4A+ABIJKlCPgDqOSoTkB6RaoDc4gL7iQVoA) 以了解其工作原理，并理解它如何优化你的代码。

它已经在 Instagram 网页版上成功推出，效果显著（交互速度提高了 2.5 倍）。它一次一个文件地静态分析你的代码，并安全地优化可优化的部分进行记忆化，其粒度比手动操作更细。如果你遵循 React 的规则，就不需要重写任何代码。ESLint 插件会告知编译器检测到的有问题的代码。它与基于代理的解决方案（如 MobX）不太兼容。配置选项和启用/禁用指令使你可以逐步在代码库中尝试该编译器。

编译器最初是用 TypeScript 编写的，并随附 Babel 绑定，但不要失望，因为它的逻辑是解耦的。接下来应该会支持 SWC，稍后可能会有 Rust 的移植版本（他们已经为此做了概念验证以确保可行）。

值得一提的是，React 团队一直有打算为 React 开发一个编译器（参见 [Andrew Clark 的推文](https://x.com/acdlite/status/1792710362745405911)）。而这仅仅是个开始，他们现在有了构建更强大功能的基础架构。我敢肯定，迟早我们将不再需要依赖数组，编译器将能够优化细粒度的上下文消费（[相关推文](https://x.com/TkDodo/status/1741193371283026422)）。

🔗 **值得关注的相关资源：**

- 📜 [React Compiler With React 18](https://jherr2020.medium.com/react-compiler-with-react-18-1e39f60ae71a)：该编译器不是 React 19 的功能。Jack 展示了在 React 18 下使用它的概念验证，通过提供一个非常简单的编译器运行时钩子。React Compiler 团队的 Lauren 刚刚确认这样做是可以的，并提供了一个[官方 polyfill](https://github.com/reactwg/react-compiler/discussions/6)，你可以暂时使用，不过建议升级到 React 19。
- 🎥 [Jack Herrington - React Compiler: In-Depth Beyond React Conf 2024](https://www.youtube.com/watch?v=PYHBHK37xlE)
- 🎥 [Theo - React Just Changed Forever](https://www.youtube.com/watch?v=DhfeXfF_W4w)
- 🧵 [Theo - Clearing up some React Compiler misunderstandings](https://x.com/t3dotgg/status/1791177359896555600)

---

[![合并 Remix 和 React Router](/emails/issues/186/remix.jpg)](https://remix.run/blog/merging-remix-and-react-router)

**[合并 Remix 和 React Router](https://remix.run/blog/merging-remix-and-react-router)**

这是 React Conf 的另一个重大公告。Remix 和 React Router 已经趋同了很多（归功于 Vite 插件和 SPA 模式），以至于继续保留两者已没有太大意义。从技术上讲，他们计划不再发布 Remix v3，而是在 React Router v7 中添加一个可选的 Vite 插件，该版本将保持向后兼容，同时也会带来新功能（RSC、服务器操作、静态预渲染等）。另请参阅后续文章 [Incremental Path to React 19: React Conf Follow-Up](https://remix.run/blog/incremental-path-to-react-19)。

---

- 💸 [Conversational AI and context-aware LLM chat with React](https://nlux.dev/?utm_source=twir-m24-2)
- 📜 [React 19 lets you write impossible components](https://www.mux.com/blog/react-19-server-components-and-actions): A great article from Mux that adopted RSCs early, explaining that we only scratched the surface of the new patterns RSCs enable. The changelog pagination example is cool and shows that even libraries like React Query might become less useful.
- 📜 [Introducing Pigment CSS: the next generation of CSS-in-JS](https://mui.com/blog/introducing-pigment-css/): the MUI team explains the motivations to create their own in-house CSS-in-JS solution, built on top of the WyW-in-JS toolkit, that should power MUI v6 later this year. It is compatible with RSCs. The adoption for MUI/Emotion/StyledComponent users should be easy.
- 📜 [Digging for SSRF in NextJS apps](https://www.assetnote.io/resources/research/digging-for-ssrf-in-nextjs-apps): Security researchers explain blind Server Side Request Forgery vulnerabilities they found in Next.js related to the Image component and Server Actions implementations. Those vulnerabilities have been patched since Next.js 14.1.1 already (January 2024).
- 📜 [Prefer Multiple Compositions](https://kyleshevlin.com/prefer-multiple-compositions/): If your component has a finite set of cases to handle, it will be more maintainable to have clear separate if/else branches for each cases rather than spreading conditionals everywhere in JSX.
- 📜 [Prefer Noun-Adjective Naming](https://kyleshevlin.com/prefer-noun-adjective-naming/): I also prefer to name a component “ButtonPrimary” instead of “PrimaryButton”. Related things remain grouped alphabetically, and are easier to lookup in the IDE.
- 📜 [Inline Styles on Steroids](https://weser.io/blog/inline-styles-on-steroids): With projects such as CSS Hooks, and the web platform planning to add support for inline style nesting, it’s only a matter of time until inline styles make a huge comeback. The author of Fela recreates the DX of a good CSS-in-JS library on top of CSS Hooks thanks to 2 new projects he’s working on.
- 📜 [Quantifying the Impact of Styled Components on Server Response Times](https://blog.levineandrew.com/quantifying-the-impact-of-styled-components-on-server-response-times): Uses SpeedScope (more powerful than Chrome DevTools) to analyze a CPU trace and concludes that style injection takes 47% of SSR time.
- 📜 [Storybook - Portable stories for Playwright Component Tests](https://storybook.js.org/blog/portable-stories-for-playwright-ct/): Although Storybook provides a play() function using a Playwright test runner, you might still want to use Playwright Component testing directly, and reuse your existing stories there.
- 📜 [Deploying Remix to Cloudflare with SST](https://ruanmartinelli.com/blog/remix-sst-cloudflare): Using SST to deploy your app to a major cloud can be a nice alternative to DX platforms like Vercel/Netlify. TIL that it’s so simple to use, and it also supports deploying to Cloudflare.
- 📦 [Restyle](https://reactstyle.vercel.app/): New CSS-in-JS library compatible with RSC that’s leveraging the brand-new style hoisting and deduplication feature of React 19. Those new React primitives were also designed with CSS-in-JS libs in mind, and it’s great to see the community already leveraging them. It’s also interesting for distributing CSS as part of a React library npm package.
- 📦 [React Google Maps 1.0](https://mapsplatform.google.com/resources/blog/google-maps-platform-graduates-react-integration-library-to-1-0/): The official Google Maps library for React is now stable, maintained by the OpenJS Foundation.
- 📦 [Million Lint 1.0-rc](https://million.dev/blog/lint-rc): IDE extension that automatically finds and fixes performance issues for you. Unlike the React compiler, it is based on runtime analysis and can detect additional performance problems that the compiler can’t. Both can be used in tandem.
- 📦 [Zustand 5.0-beta - Upgrade guide available - drop deprecated features, upgrades React/TS](https://github.com/pmndrs/zustand/blob/v5/docs/guides/migrating-to-v5.mdx)
- 📦 [Storybook 8.1 - tag filtering, typesafe mocking, beforeEach, portable stories API](https://github.com/storybookjs/storybook/releases/tag/v8.1.0)
- 📦 [Storybook-Rsbuild - Storybook builder powered by Rsbuild](https://github.com/rspack-contrib/storybook-rsbuild)

<SubscribeFormEmbed placement="middle" />

---

## 💸 赞助 {#sponsor2}

[![Next.js 身份验证教程（使用 RSC 和服务器操作）](/emails/issues/186/AuthKitNextjs.jpg)](https://www.youtube.com/watch?v=aoRG1q_kVo8)

**[Next.js 身份验证教程（使用 RSC 和服务器操作）](https://www.youtube.com/watch?v=aoRG1q_kVo8)**

WorkOS 和 Sam Selikoff 的最新教程展示了如何轻松将 AuthKit 托管的登录框添加到 Next.js 应用程序：

📚 Get started using the Authkit \<> Next.js [integration library](https://github.com/workos/authkit-nextjs)  
🤖 Set up environment variables, configure the callback route and middleware, and implement signIn and signOut functionalities  
⚙️ Protect routes in the Next.js app from unauthenticated users with the getUser function

AuthKit 可与 WorkOS 用户管理结合使用，支持 MFA（多因素认证）、身份关联、电子邮件验证、用户模拟等功能。

最重要的是，它**每月免费支持多达 1,000,000 名活跃用户（MAU）🚀**

---

## 📱 React-Native {#react-native}

本部分由 [Benedikt](https://twitter.com/bndkt) 撰写。

![](/emails/issues/186/ursc.jpg)

React Conf 已正式落幕，希望您有机会观看 YouTube 上精彩的演讲录像。我最大的收获是发现会议中有如此丰富的 RN 内容！由于 RN 的开发高度开放且与整个社区协作，虽然没有出人意料的"重大公告"，但很好地总结了 RN 的现状并展望了未来道路。最令我印象深刻的是 Evan Bacon 提出的通用 React 服务器组件（Universal RSC）愿景，他通过一个惊艳的演示进行展示，强烈建议您[亲自观看](https://www.youtube.com/watch?v=T8TZQ6k4SLE&t=20765s)。以下是我总结的主要要点：

- RN 蓬勃发展：每周下载量超过 200 万次，2024 年已发布 30 个版本
- 新架构现已进入 Beta 阶段
- Expo 被官方推荐用于所有新应用
- 全新 reactnative.dev 着陆页已上线
- React Conf 应用已开源
- Expo 的通用 RSC 愿景

---

- 💸 [PowerSync - Supabase \<> SQLite sync layer: follow our step-by-step video integration guide.](https://docs.powersync.com/integration-guides/supabase-+-powersync?utm_source=newsletter&utm_medium=sponsorship&utm_campaign=this-week-in-react)
- 👀 [New React Native landing page](https://reactnative.dev/)
- 🐦 [New resources to get started with React Native and Expo](https://x.com/jonsamp/status/1791164393893609705): New landing page, new "Getting Started" docs, new Expo dev environment setup docs
- 🐦 [Interesting discussion on Apple's stance on server-driven UI in iOS apps](https://x.com/sregg/status/1791784335999160783): Will Universal RSC be a challenge in Apple’s App Store approval process?
- 🐦 [Potential ways to decrease Android bundle size](https://x.com/mironcatalin/status/1792485000559935571): Two settings can significantly decrease bundle size, but - as always - this comes with trade-offs.
- 🗓 [Chain React Conf](https://chainreactconf.com/?utm_source=thisweekinreact) - Portland, OR - July 17-19. The U.S. React Native Conference is back with engaging talks and hands-on workshops! Get 15% off your ticket with code “TWIR”
- 📜 [Debunk ideas on cross-platform framework](https://www.bam.tech/article/debunk-ideas-on-cross-platform-framework): Performance, Security, Accessibility, Stability, App Store acceptance, Native Features - all of these are sometimes mistakenly doubted when it comes to cross-platform apps.
- 📜 [Breaking down react-native-video 6.0.0 stable release - enhancements and comparisons](https://www.thewidlarzgroup.com/blog/breaking-down-react-native-video-6-0-0-stable-release-enhancements-and-comparisons)
- 📜 [Creating Custom Fonts with React-Native-Skia](https://gitstashapply.medium.com/creating-custom-fonts-with-react-native-skia-4851d8b14ddd)
- 📦 [Bootsplash v6 beta - Expo plugin, simpler setup](https://github.com/zoontek/react-native-bootsplash/pull/578): The React Conf app used it for splash screen!
- 📦 [React Conf app open-sourced](https://github.com/expo/react-conf-app): Already uses React Compiler ([Tweet](https://x.com/kadikraman/status/1791155001882275989))
- 🎙️ [RNR 297 - Jumping over the React Native v0.74 Bridge](https://reactnativeradio.com/episodes/rnr-297-jumping-over-the-react-native-v074-bridge)
- 🎥 [Supercharging your React Native app for Windows](https://www.youtube.com/watch?v=4sbAvwukSWM): React Native session at MS Build 2024

---

## 🔀 其他领域 {#other}

- 📜 [Web 新动态 - 12 项新可用的 Baseline 功能](https://web.dev/blog/new-in-the-web-io2024)
- 📜 [JavaScript 框架新动向（2024年5月）](https://developer.chrome.com/blog/frameworks-may-2024)
- 📜 [使用 Enhance SSR 实现可移植的服务端渲染 Web 组件](https://begin.com/blog/posts/2024-05-03-portable-ssr-components)
- 📜 [ECMAScript 2023 特性：Symbol 作为 WeakMap 键名](https://2ality.com/2024/05/proposal-symbols-as-weakmap-keys.html)
- 📦 [SolidStart 1.0 - 未来框架形态](https://www.solidjs.com/blog/solid-start-the-shape-frameworks-to-come)
- 📦 [Graphql-query - Rust 编写的 GraphQL 查询解析器，速度提升 8.7 倍](https://stellate.co/blog/graphql-query-parsing-8x-faster-with-rust)
- 📦 [Node 22.2](https://nodejs.org/en/blog/release/v22.2.0)

---

## 🤭 趣闻 {#fun}

[![alt](/emails/issues/186/meme.jpg)](https://x.com/rauchg/status/1791163745307328650)

[![alt](/emails/issues/186/meme2.jpg)](https://x.com/sebastienlorber/status/1790796662153117863)

（好吧，这个 React Compiler 的梗在技术上并不准确，但还是很有趣 😇 抱歉了 Compiler 团队）

再见！👋