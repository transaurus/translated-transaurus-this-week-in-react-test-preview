---
slug: /191
title: "This Week In React #191: React-Router, Remix, React Query, Suspense, Compiler, Remotion, CodeHike, next-safe-action, Framer-Motion, React-Admin, StyleX, Mobx, FlashList, RN native bridging, Expo, TypeScript, State of JS, Node ..."
authors: [slorber]
date: 06-26-2024
---

大家好！

本周，我们似乎终于进入了夏季/假期季节，React 的重大公告节奏正在放缓。我们也将短暂休夏假，跳过 2 期，并于 7 月 17 日回归。

在 React 方面，我们继续有与上周的 Suspense 风波相关的有趣内容。React Router 的一项新功能允许你对路由树进行代码分割。

在 React Native 方面，团队正试图发布 v0.75 的 RC 版本，但遇到了一些阻碍，不过应该很快就会发布。

对我来说最令人兴奋的消息是 TypeScript 5.5 稳定版的发布：这是一个很棒的版本，特别是在谓词类型推断方面！State of JS 的调研结果也已发布，如果你想了解 JS 趋势，可以去看看。

<!-- truncate -->

**💡 [在 Twitter 上查看本新闻稿](https://slo.im/thread) - 视觉格式 🎨**

---

import Support from "@site/newsletter/_support.mdx";

<Support />

---

## 💸 赞助 {#sponsor1}

[![面向企业的革命性 React 网格](/emails/issues/190/advertfinal.jpg)](https://1771technologies.com/graphitegrid)

**[面向企业的革命性 React 网格](https://1771technologies.com/graphitegrid)**

数据网格是 Web 应用中的复杂组件，但当前的解决方案效率低下、需要大量维护且性能不佳。[Graphite Grid](https://1771technologies.com/graphitegrid) 通过两大关键特性改变了这一局面：可重定向渲染和响应式信号状态。

**Graphite Grid** 将网格状态与视图逻辑分离，允许单一的统一状态模型支持多种渲染目标，无论是声明式还是命令式。它包含 **DOM 和 Canvas** 渲染器，为开发者提供灵活的高性能选项 🚀。

Graphite Grid 具有声明性和一致性，利用状态信号确保与应用程序的无缝集成。它专为 **React 设计**，是唯一一个基于 React 状态管理原语构建的 JavaScript 数据网格。[立即试用！](https://1771technologies.com/graphitegrid/demo)

---

## ⚛️ React {#react}

[![React-Router 6.24 - 惰性路由发现](/emails/issues/191/rr.jpg)](https://github.com/remix-run/react-router/blob/main/CHANGELOG.md#v6240)

**📦 [React-Router 6.24 - 惰性路由发现](https://github.com/remix-run/react-router/blob/main/CHANGELOG.md#v6240)**

此 React Router 版本包含一个新的 `unstable_patchRoutesOnMiss` 钩子，当 React Router 无法匹配任何现有路由时将被调用。它允许你加载额外的路由并对路由进行代码分割，而不是将所有路由保存在一个单一的巨型模块中。对于拥有数千个路由的大型应用来说，这是一项受欢迎的功能，这样就不需要提前加载所有路由，从而延迟了 hydration。

Remix 本该休息一下，但显然还没有！📦 [Remix 2.10](https://remix.run/docs/en/main/start/changelog#v2100) 已经发布，并且已经利用了这一新的 React Router 功能，通过一个便捷的 [“战争迷雾”](https://remix.run/docs/en/main/guides/fog-of-war) 功能将其暴露出来，你可以通过一个简单的 `future.unstable_fogOfWar` 标志启用。此外，还实现了早期发现优化以避免瀑布流。

---

- 💸 [Meilisearch — Build fast, typo-tolerant search with React](https://dub.sh/ueC2f57)
- 👀 [React.dev PR - Add branding context menu](https://github.com/reactjs/react.dev/pull/6986): Right-click the website navbar logo to access the official svgs and brand colors of React.
- 👀 [Next.js PR draft - `nextConfig.requiredEnv`](https://github.com/vercel/next.js/pull/67187)
- 👀 [Next.js PR draft - type check for `env`](https://github.com/vercel/next.js/pull/67157s)
- 🐦 [Joe Savona - "Some thoughts on the suspense changes from 19 RC"](https://x.com/en_JS/status/1803480672327311425): To avoid situations such as past week’s Suspense drama, the React team is working on changes to get feedback earlier (working groups, RFC, canary…).
- 🐦 [Lee Robinsin - "Here's where we're headed with caching in Next.js"](https://x.com/leeerob/status/1803824227704877236): “Our goal is to make all async operations (like doing a `fetch`) opt into dynamic rendering”, “We believe Partial Prerendering will become the default”.
- 🗓️ [React Rally](https://reactrally.com/?utm_source=thisweekinreact) - 🇺🇸Utah - 12-13, August - Get a 10% discount with code "TWIR". There’s a React Server Components [workshop](https://reactrally.com/workshop) with Kent C. Dodds
- 📨 [ECMAScript News - Discover our partners' newsletter to keep up to date with ES, TC39, JS tooling, and runtimes](https://ecmascript.news/?utm_source=thisweekinreact)
- 📜 [Component, colocation, composition: A note on the state of React](https://bobaekang.com/blog/component-colocation-composition/): The recent Suspense drama highlights the gap between React’s component-oriented vision and its current limitations.
- 📜 [From markdown to video - Animated code walkthroughs with Code Hike and Remotion](https://v1.codehike.org/blog/remotion): If you have seen recent code animation videos of Matt Pocock or Delba, here’s a great article and demos to understand how it works.
- 📜 [Understanding React Compiler](https://tonyalicea.dev/blog/understanding-react-compiler/): Explains how the React compiler work, starting from the basics (transpiler, AST, memoization), then analyzing the compiler output of a concrete example.
- 📜 [Wait for pending: A (not great) alternative Suspense algorithm](https://dev.to/alexandereardon/wait-for-pending-a-not-great-alternative-suspense-algorithm-1gdl): Explores the possibility of a different algorithm for Suspense, with different tradeoffs.
- 📜 [How to make draggable Framer Motion elements snap to breakpoints](https://sinja.io/blog/framer-motion-drag-snap-points): Interactive article implementation snap points on top of Framer Motion, including inertia/velocity support.
- 📜 [Mobx Memoizes Components (You don't need React Compiler)](https://www.mikejohnson.dev/posts/2024/06/mobx-react-compiler): Takes an existing demo using the React compiler and turns it into an optimized Mobx app with minimal changes. MobX prevents re-renders by auto-tracking dependencies. Note this [Mobx issue](https://github.com/mobxjs/mobx/issues/3874) explains why Mobx (based on proxies) is not compatible with the compiler, and lib creator also confirms it’s already optimized.
- 📜 [Web Workers, Comlink, Vite and TanStack Query](https://johnnyreilly.com/web-workers-comlink-vite-tanstack-query): React Query being an “async state manager”, it also works well to offload expensive work from the main thread.
- 📜 [Storybook - Visual testing: The greatest trick in UI development](https://storybook.js.org/blog/visual-testing-is-the-greatest-trick-in-ui-development/): I agree that too many devs miss out on visual regression testing. It has a really great ROI, considering how easy it is to add to an existing Storybook. As this article shows, covering the same component with React Testing Library requires more work.
- 📜 [Communication Between Client Components in Next.js](https://www.thisdot.co/blog/communication-between-client-components-in-next-js): With RSCs, new challenges emerged to make 2 client components communicate, and you might not be able to lift the state up unless the parent is also a client component. This article proposes 3 solutions: using a Provider, search params, and server state.
- 📜 [How to Validate Form in Remix with clientAction](https://sergiodxa.com/tutorials/validate-form-in-remix-with-clientaction): Using the new Remix `clientAction` export can nicely complete the server `action` validation and progressively enhance your form with local errors.
- 📜 [Type-safe TanStack Query with OpenAPI](https://ruanmartinelli.com/blog/tanstack-query-openapi): Shows how to create generic React Query hooks (`useGetQuery`, `usePostMutation`...) that are fully typed according to an OpenAPI specification.
- 📜 [How To Use Google Sheets as a Database With React via Next.js](https://thenewstack.io/how-to-use-google-sheets-as-a-database-with-react-and-ssr/)
- 📜 [Is it ok to pass setState as a prop in React?](https://tigerabrodi.blog/is-it-ok-to-pass-setstate-as-a-prop-in-react)
- 📦 [StyleX 0.7 - CLI (experimental), Literal names for CSS variables](https://stylexjs.com/blog/v0.7.0): New CLI transforms an entire folder and can be an alternative to the bundler integration.
- 📦 [Next-Safe-Action 7.0 - Type safe and validated Server Actions](https://github.com/TheEdoRan/next-safe-action/releases/tag/v7.0.0): See also the [v6 to v7 migration guide](https://next-safe-action.dev/docs/migrations/v6-to-v7).
- 📦 [Astro 4.11 - 500 page improvements, `<Code>` component Shiki transformer](https://astro.build/blog/astro-4110/)
- 📦 [React-Admin 5.0 - Improves on UI, DX, app init, Data Providers, forms…](https://marmelab.com/blog/2024/06/20/react-admin-v5.html)
- 📦 [Shopify Hydrogen Update - Visual Editor, Optimistic Cart, Vite stable, RichText component, SEO meta export…](https://hydrogen.shopify.dev/update/summer-editions-24-announcing-the-hydrogen-visual-editor-and-a-ton-of-dx-improvements)
- 📦 [stan-js - Minimalistic state management library](https://codemask-labs.github.io/stan-js/)
- 🎥 [Jack Herrington - React 19's useOptimistic: everything you need to know](https://www.youtube.com/watch?v=QWVr7uDyBXE)
- 🎥 [Theo - I Used To Hate Next.js…](https://www.youtube.com/watch?v=6q1eL7IcKzw)
- 🎥 [Dave Gray - Nextjs Server Actions Just Got Better (using next-safe-action)](https://www.youtube.com/watch?v=ahB3DgUMs1A)
- 🎥 [Ryan Carniato - Facing Frontend's Existential Crisis, React Summit 2024](https://www.youtube.com/watch?v=nzbV0YgSBuo)
- 🎙️ [Syntax - What’s Next for NextJS with Tim Neutkens](https://www.youtube.com/watch?v=fXugpgknScY)

<SubscribeFormEmbed placement="middle" />

---

## 💸 赞助 {#sponsor2}

[![WorkOS：面向B2B SaaS的现代身份平台](/emails/issues/189/WorkOS.jpg)](https://workos.com/?utm_source=thisweekinreact&utm_medium=newsletter&utm_campaign=q22024)

**[WorkOS：面向B2B SaaS的现代身份平台](https://workos.com/?utm_source=thisweekinreact&utm_medium=newsletter&utm_campaign=q22024)**

使用WorkOS，仅需几行代码即可开始向企业销售。

🔐 WorkOS支持完整的用户管理解决方案，包括**SSO、SCIM、RBAC和FGA**。

🏗️ API具有**灵活、易用和模块化**的特点。按需选择功能，几分钟内即可集成。

🎨 设计和用户体验至关重要。从文档质量到用户引导流程，我们**为开发者消除所有不必要的复杂性**。

✨ 用户管理功能**在月活跃用户（MAU）不超过100万的情况下免费**，包含机器人防护、模拟登录、多因素认证（MFA）等功能。

🤝 WorkOS已获得**Perplexity**、**Vercel**和**Webflow**等数百家领先初创企业的信任。

使用[WorkOS](https://workos.com/?utm_source=thisweekinreact&utm_medium=newsletter&utm_campaign=q22024)为您的认证技术栈保驾护航 🚀

---

## 📱 React-Native {#react-native}

本栏目由[Benedikt](https://twitter.com/bndkt)撰写。

- 💸 [WithFrame - 开箱即用的 React Native 组件](https://withfra.me/?utm_source=thisweekinreact&utm_medium=email&utm_campaign=quick-link--4)
- 🐦 [Marc Rousavy 谈如何在 RN 中获取相关日志或崩溃信息以便在开源库中创建问题](https://x.com/mrousavy/status/1805637303726973437)
- 🗓️ [The Geek Conf](https://www.thegeekconf.com/?utm_source=thisweekinreact) - 🇩🇪 柏林 - 7月18日 & 25日 - 使用代码 "TWIR" 可享9折优惠。Mo Khazali — Theodo UK 移动负责人、Matteo Collina — Platformatic.dev 首席技术官、Siddharth Kshetrapal — GitHub 高级软件工程师将发表演讲！
- 🗓 [Chain React Conf](https://chainreactconf.com/?utm_source=thisweekinreact) - 🇺🇸 俄勒冈州波特兰 - 7月17-19日。美国 React Native 大会回归，带来深度演讲和实践研讨会！使用代码 "TWIR" 可享85折优惠
- 👀 [Revert "Make the New Architecture the default"](https://github.com/facebook/react-native/commit/37e8fa113ef6a8be7cd057b2bf6ffaa4ae6439d9)：看起来默认启用新架构的计划可能推迟，最终不会包含在 v0.75 中？
- 👀 [Shopify FlashList PR - 新架构支持已合并（尚未发布）](https://github.com/Shopify/flash-list/pull/550)
- 👀 [Fishjam Cloud - Software Mansion 的新项目，旨在为 React Native 带来视频流功能](https://cloud.fishjam.stream/)
- 👀 [expo-router-native-intent-demo - 在 Expo Router 中使用 +native-intent API 支持 iOS 的"复制到应用"功能](https://github.com/EvanBacon/expo-router-native-intent-demo)
- 📜 [React Native 模块客户端指南](https://ospfranco.com/client-guide-to-react-native-modules/)：Oscar 深入剖析了向 React Native 暴露原生模块的不同方式及其优缺点，帮助开发者根据场景选择最佳方案
- 📜 [通过 JSI 桥接 React Native 与 Rust](https://ditto.live/blog/bridging-react-native-and-rust-via-jsi)：数据同步引擎 Ditto（基于 Rust 构建）分享了如何通过 JSI 将其核心逻辑桥接到 RN
- 📜 [React Native 中的设备端 AI/ML](https://blog.swmansion.com/on-device-ai-ml-in-react-native-137918d0331b)：这在不久前还不可想象的技术，现在已能在 RN 中实现实时相机 AI 滤镜
- 📜 [从 Web 到原生：使用 React Native 和 Expo 的旅程](https://expo.dev/blog/from-web-to-native-with-react-native-and-expo)：记录 Web 开发者使用 RN/Expo 构建首个移动应用的经历
- 📜 [与 Google 一样，BAM 相信 Kotlin 多平台](https://www.bam.tech/article/just-as-google-bam-believes-in-kotlin-multiplatform)：专注 RN 的 BAM 公司认为 KMP 是跨平台方案中的有力竞争者，并分析了其优势与局限
- 📜 [Expo - FCM v1 迁移截止日期改为7月20日](https://expo.dev/blog/fcm-v1-migration-deadline-changed-to-july-20th)
- 🎥 [Simon Grimm - 用 React Native 构建电视应用](https://www.youtube.com/watch?v=4S7Ftg58Yeg)
- 🎥 [JavaScript Mastery - 2024年面向初学者的免费4.5小时React Native课程](https://www.youtube.com/watch?v=ZBCUegTZF7M)

---

## 🔀 其他 {#other}

- 📊 [2023 JavaScript 现状 - 调查结果](https://2023.stateofjs.com/en-US)
- 📜 [JavaScript 如何最终改善模块体验](https://thenewstack.io/how-javascript-is-finally-improving-the-module-experience/)
- 📜 [CSS 中的内联条件语句，现在可行了？](https://lea.verou.me/blog/2024/css-conditionals-now/)
- 📜 [GitHub Copilot 扩展是你所需要的一切](https://code.visualstudio.com/blogs/2024/06/24/extensions-are-all-you-need)
- 📜 [MDN - 新的 JavaScript Set 方法](https://developer.mozilla.org/en-US/blog/javascript-set-methods/)
- 📦 [TypeScript 5.5 - 推断类型谓词、索引访问的收窄、JSDoc @import](https://devblogs.microsoft.com/typescript/announcing-typescript-5-5/)
- 📦 [farm - 用 Rust 编写的极快且兼容 Vite 的 Web 构建工具](https://github.com/farm-fe/farm)
- 📦 [Node 20.15 - 测试计划、–inspect-await](https://nodejs.org/en/blog/release/v20.15.0)
- 📦 [node-swift - 用 Swift 创建 Node 模块](https://github.com/kabiroberai/node-swift)
- 🎥 [Matt Pocock：TypeScript 5.5 太棒了](https://www.youtube.com/watch?v=sciBO_IaxTw)

---

## 🤭 趣闻 {#fun}

[![alt](/emails/issues/191/meme.jpg)](https://x.com/ccccjjjjeeee/status/1804814043359621254)

下次见！👋