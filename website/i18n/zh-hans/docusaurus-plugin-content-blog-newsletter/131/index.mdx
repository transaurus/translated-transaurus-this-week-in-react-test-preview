---
slug: /131
title: "This Week In React #131: useReducer, Controlled Inputs, Async React, DevTools, React-Query, Storybook, Remix, React-Native, Expo..."
authors: [slorber]
date: 01-17-2023
---

大家好！

我们正逐渐走出假期季节。虽然有不少博客文章，但除了React-Native 0.71之外，没有重大公告。

我刚结束滑雪假期，现在回归每周通讯的日程安排。我没有全程关注动态，但本周Twitter上的热议似乎是围绕Tailwind？😅

距离参与[State of React-Native调查](https://survey.stateofreactnative.com/)只剩2天时间 🙏

对React-Three-Fiber感兴趣的创意网页开发者，可订阅[Web Game Dev](https://www.webgamedev.com/newsletter)通讯：您将在此获得更深入的信息。

<!-- truncate -->

**💡 [在Twitter查看此通讯](https://slo.im/thread) - 视觉化格式 🎨**

---

import Support from "@site/newsletter/_support.mdx";

<Support />

---

## 💸 赞助商 {#sponsor1}

[![React Bricks是基于React组件的可视化编辑CMS](/emails/issues/128/reactbricks.png)](https://reactbricks.com/?utm_source=this_week_in_react)

**[React Bricks是基于React组件的可视化编辑CMS](https://reactbricks.com/?utm_source=this_week_in_react)**

**开发者灵活性高**：使用React组件创建专属设计系统，在JSX中添加可视化编辑功能，并通过侧边栏控件编辑背景颜色等属性。支持Next.js、Gatsby或Remix框架，可搭配任意CSS方案！

**内容编辑者易上手**：直接可视化编辑且不破坏设计系统，相比传统无头CMS的抽象字段编辑更直观。**节省时间**，内容编辑者能自主操作！

**企业级功能完备**：含协作工具、时间机器、单点登录、GDPR合规数据中心、全球CDN图像优化、电商集成、定时发布等。

从这里开始：[ReactBricks.com](https://reactbricks.com/?utm_source=this_week_in_react)

---

## ⚛️ React {#react}

[![useReducer](/emails/issues/131/useReducer.jpg)](https://www.builder.io/blog/use-reducer)

**[治愈useState困境](https://www.builder.io/blog/use-reducer)**

Proposes to replace several `useState` with a `useReducer` with a single action. He explains the advantages, like the possibility to make sure the state is consistent, or to migrate later to a reducer with several actions. An interesting pattern to know. My opinion: it is quite possible to get similar benefits by using a single `useState` with a single object and a custom hook. `useState` or `useReducer` should be an implementation detail.

---

[![useReducer](/emails/issues/131/react-query-ts.jpg)](https://tkdodo.eu/blog/type-safe-react-query)

**[类型安全的React Query](https://tkdodo.eu/blog/type-safe-react-query)**

TypeScript环境下需确保类型可靠：后端返回数据是否可信？Dominik提出React-Query结合Zod的方案。通过类型推断可避免`as`强制转换或泛型。当后端与前端处于同一monorepo时，全栈环境可采用tRPC或Zodios。

---

- 📜 [Data Binding in React](https://www.joshwcomeau.com/react/data-binding/): new interactive article by Josh Comeau on controlled inputs in React, including the subtleties to know about each type of input, or the use of ids for accessibility.
- 📜 [Async React with NextJS 13](https://swizec.com/blog/async-react-with-nextjs-13/): use of async Server Components in a Next.js 13 app, covering many interesting details like error boundaries, fetch extended by Next.js, React cache...
- 📜 [How to debounce and throttle in React without losing your mind](https://www.developerway.com/posts/debouncing-in-react): highlights that it is not so simple to implement debouncing in React: unstable debounced function, memoization, stale closure...
- 📜 [Why You Should Use a React Framework](https://leerob.substack.com/p/react-frameworks): Lee Robinson gives different reasons to use a framework, to dedicate more time to the product. React has evolved, and it is no longer just a library, but also an architecture, a community and an ecosystem.
- 📜 [Future of Storybook in 2023](https://storybook.js.org/blog/future-of-storybook-in-2023/): a 2022 retrospective and what to expect in 2023: Storybook 7.0, performance, Turbopack support, embeds, testing, improved React-Native support.
- 📜 [Storybook Ecosystem CI](https://storybook.js.org/blog/storybook-ecosystem-ci/): new system that allows to detect in advance regressions linked to minor upgrades of transitive dependencies.
- 📜 [How We Rebuilt React DevTools with Replay Routines](https://blog.replay.io/how-we-rebuilt-react-devtools-with-replay-routines): Mark Erikson goes in depth on how React DevTools work, and how the new integration with the Replay time-travel debugger works.
- 📜 [Optimizing React performance without refs and memo](https://alexsidorenko.com/blog/react-optimize-rerenders-without-refs-memo/): proposes to optimize React re-renders by isolating code in a smaller component.
- 📜 [Why Vercel OG Is Amazing and How to Use It](https://www.flavienbonvin.com/why-vercel-og-is-amazing-and-how-to-use-it/): using a meta image is important for marketing. Vercel OG is an innovative solution using JSX and Tailwind, easy to integrate into a Next.js project deployed on Vercel.
- 📜 [Excalidraw - Rethinking the Component API](https://blog.excalidraw.com/redesigning-editor-api/): explains some React design decisions for the Excalidraw editor that remove the use of render props and replaces it with React.Children, a deprecated API.
- 📜 [Building a fast, animated image gallery with Next.js](https://vercel.com/blog/building-a-fast-animated-image-gallery-with-next-js)
- 📜 [React, Vite and TypeScript: Get started in under 2 minutes](https://blog.nrwl.io/react-vite-and-typescript-get-started-in-under-2-minutes-3bd5cd836175)
- 📜 [A guide to streaming SSR with React 18](https://blog.logrocket.com/streaming-ssr-with-react-18/)
- 📜 [Little React Things: React applications are functions](https://www.zekehernandez.com/posts/react-applications-are-functions)
- 🧑‍🎓 [New official Relay tutorial](https://twitter.com/RelayFramework/status/1611424289068314625)
- 👀 [Remix + Vanilla Extract PR - merged](https://github.com/remix-run/remix/pull/5040)
- 🐦 [Solid in React](https://twitter.com/RyanCarniato/status/1611448920521179136): Ryan Carniato's POC to integrate a SolidJS component into a React app
- 📦 [Remix 1.10](https://github.com/remix-run/remix/releases/tag/remix%401.10.0): the official end of the "React-Routering Remix" project and many new useful hooks.
- 📦 [create-react-signals](https://github.com/dai-shi/create-react-signals): Daishi Kato inspired by Preact signals to create new reactive bindings for Zustand, Valtio and Jotai.
- 📦 [Mutative](https://github.com/unadlib/mutative) + [Structura.js](https://giusepperaso.github.io/structura.js): 2 new faster alternatives to Immer for immutable updates?
- 📦 [Redux Toolkit 2.0 alpha](https://github.com/reduxjs/redux-toolkit/releases/tag/v2.0.0-alpha.0): gives an idea of upcoming v2 breaking changes
- 📦 [Create-Universal-App](https://github.com/chen-rn/CUA): starter to create universal fullstack apps (web + mobile): Next.js, Expo, Tamagui, tRPC...
- 📦 [Chakra UI FigPilot](https://twitter.com/chakra_ui/status/1613267652717191191): transform Figma design to Chakra UI
- 📦 [Inertia 1.0](https://twitter.com/inertiajs/status/1614295060610437123): PHP framework from Tailwind co-creator using server side routing and React integration.
- 📦 [Precedent](https://twitter.com/steventey/status/1613928948915920896): "Building blocks for Next.js"
- 📦 [MDX extension for VSCode 1.1](https://twitter.com/remcohaszing/status/1613910319805382657): experimental intellisense support
- 📦 [Next.js 13.1.2](https://twitter.com/nextjs/status/1613910922128416768)
- 📦 [Radix releases - January 17](https://www.radix-ui.com/docs/primitives/overview/releases#january-17-2023)
- 📦 [Visx 3.0](https://github.com/airbnb/visx/releases/tag/v3.0.0)
- 🎥 [Did NextJS 13 Break State Management?](https://www.youtube.com/watch?v=OpMAH2hzKi8)
- 🎥 [Blazing Fast Tips: React & TypeScript](https://www.youtube.com/watch?v=37PafxU_uzQ)
- 🎥 [Is it Too Late To Learn React?](https://www.youtube.com/watch?v=WByOlXWrGaY)

<SubscribeFormEmbed />

---

## 💸 赞助商 {#sponsor2}

[![开发者国家调查 - 您想对开发者生态系统产生影响吗？](/emails/issues/128/dn-survey.png)](https://developereconomics.net/?member_id=thisweekinreact)

**[您想对开发者生态系统产生影响吗？](https://developereconomics.net/?member_id=thisweekinreact)**

根据最新的《开发者国家状况报告》，React 是迄今为止最受欢迎的前端库，58%使用客户端Web框架的Web开发者都在使用它。您对此有何看法？

参与[开发者国家调查](https://developereconomics.net/?member_id=thisweekinreact)，这是该机构有史以来最全面的调查，塑造2023年开发者关键趋势并赢取丰厚奖品！🎁

完成调查即可免费获得虚拟礼包。别忘了注册参与每周抽奖。250份奖品包括ThinkPad L15 Gen 3、Intel NUC 10迷你主机、物联网套件、iPad Air、礼品卡、Udemy课程、科技配件等。

[从这里开始](https://developereconomics.net/?member_id=thisweekinreact)！

---

## 📱 React-Native {#react-native}

[![useReducer](/emails/issues/131/rn-android-bt.jpg)](https://reactnative.dev/blog/2023/01/12/version-071)

**[React Native 0.71：默认TypeScript、Flexbox间隔支持等更新](https://reactnative.dev/blog/2023/01/12/version-071)**

本次重大更新包括：

- 默认启用TypeScript
- 支持像素级Flex间隔（后续将支持百分比）
- 简化跨平台开发的新Web风格属性（可访问性/样式/事件）
- 开发者体验优化：点击检查DevTools、新版Hermes、新架构...
- [Maven Central提供Android预构建库](https://github.com/reactwg/react-native-new-architecture/discussions/105)：Android构建时间减少94%。注：iOS构建时间也有[大幅优化空间](https://twitter.com/Baconbrix/status/1611527618444120065)

---

[![expo-m1](/emails/issues/131/expo-m1.jpg)](https://blog.expo.dev/m1-workers-on-eas-build-dcaa2c1333ad)

**Expo博客新文章汇总**：

- 👀 SDK 48计划二月底发布
- 📜 [EAS Build全面提供M1工作器](https://blog.expo.dev/m1-workers-on-eas-build-dcaa2c1333ad)：iOS构建时间减少40%，即将成为默认工作器
- 📜 [Android推送通知实现变更](https://blog.expo.dev/an-implementation-change-to-expo-push-notification-service-for-android-notifications-ede056189e33)：不再区分APNS/FCM接收状态
- 📜 [通过夜间构建测试React Native](https://blog.expo.dev/testing-react-native-from-the-nightly-builds-ee54ad0c9830)：使用开发版尽早发现问题
- 📜 [停止支持经典构建服务](https://blog.expo.dev/classic-build-service-no-longer-supported-73c82b500f56)：需迁移至EAS或使用`turtle-cli`

---

- 📊 [State of React-Native](https://survey.stateofreactnative.com/)：调查将于本周五截止，请及时参与！
- 📖 [Callstack - React Native 性能优化终极指南](https://www.callstack.com/campaigns/download-the-ultimate-guide-to-react-native-optimization)
- 🐦 ["Metro v74 中 React Native 打包速度提升约 10%"](https://twitter.com/Baconbrix/status/1613899384504127488)
- 🎨 [多窗口 iOS 演示](https://twitter.com/jpdriver/status/1612265133497282561)
- 📦 [React-Native-OpenAI-JSX](https://github.com/cawfree/react-native-openai-jsx)
- 🎥 [Skia 着色器与线段符号距离函数](https://www.youtube.com/watch?v=KgJUNYS7ZnA)
- 🧑‍🎓 [React Native 10 倍性能优化](https://react-native-10x-faster.com/)

---

## 🧑‍💻 招聘信息 {#jobs}

🧑‍💼 [**TLDR - 高级软件工程师（远程，$120k-200k）**](https://tldr.tech/jobs/senior-software-engineer/23?utm_source=thisweekinreact)

TLDR 通讯正在招聘首位工程师，负责搭建招聘平台及其他内部项目。要求具备开发副业项目或小团队经验，熟悉 Next.js 和 Postgres/Supabase。

🧑‍💼 [**Causal 产品工程师（远程/伦敦/纽约，$150-250k）**](https://jobs.lever.co/causal-app/4acaafbe-ef3d-45a6-bbe6-687c022d727c?lever-origin=applied&lever-source%5B%5D=thisweekinreact.com)

Causal 是 A 轮初创公司（由 Coatue/Accel 投资），致力于构建一体化数字处理与数据可视化工具。诚聘能解决复杂 UX/性能挑战的资深 React 工程师。

🧑‍💼 [**Callstack - 高级 React Native 开发工程师（完全远程，B2B 月薪净收入 PLN 21-32k）**](https://www.callstack.com/senior-react-native-developer)

您希望开发全球使用量最高的应用吗？想要共同塑造 React Native 技术生态吗？加入 Callstack 的 React & React Native 技术领袖团队。访问官网获取详情，期待您的申请——请尽情展示您的实力！

🧑‍💼 [**G2i - 100% 远程 React Native 职位**](https://twitter.com/gabe_g2i/status/1563204813881425926?s=20&t=ArRLC77BpRwXXCdx8fnUqw)

我们开放多个 React Native 开发职位！年薪约 16 万美元加 10% 奖金。要求具备 RN 生产环境经验且位于美国境内。私信 [@gabe_g2i](https://twitter.com/gabe_g2i) 咨询详情，并请注明来自 This Week in React。

💡 [如何发布招聘信息？](https://thisweekinreact.com/sponsor)

---

## 🔀 其他资讯 {#other}

- [2022年JavaScript生态圈调查报告](https://2022.stateofjs.com/)
- [2022年JavaScript新星项目](https://risingstars.js.org/)
- [Turborepo 1.7](https://turbo.build/blog/turbo-1-7-0)
- [tRPC - v10重构中的TypeScript性能优化经验](https://trpc.io/blog/typescript-performance-lessons)
- [微前端开发指南](https://microfrontend.dev/)
- [加速JavaScript生态圈 - 模块解析篇](https://marvinh.dev/blog/speeding-up-javascript-ecosystem-part-2/)
- [修复生产环境Node.js应用的内存泄漏](https://kentcdodds.com/blog/fixing-a-memory-leak-in-a-production-node-js-app)
- [Chrome 109新特性](https://developer.chrome.com/blog/new-in-chrome-109/) + [Chrome 110 Beta](https://developer.chrome.com/blog/chrome-110-beta/)
- [2023年核心Web指标优化建议](https://web.dev/top-cwv-2023/)
- [TypeScript错误结构解析](https://www.totaltypescript.com/structure-of-a-typescript-error)
- [TypeScript泛型思维模型](https://www.totaltypescript.com/mental-model-for-typescript-generics)
- [未处理Promise拒绝的陷阱](https://jakearchibald.com/2023/unhandled-rejections/)
- [从Ruby到Node：Shopify CLI重构提升开发者体验](https://shopify.engineering/overhauling-shopify-cli-for-a-better-developer-experience)
- [条件式CSS实践指南](https://ishadeed.com/article/conditional-css/)
- [NPM Kiosk - NPM包销售新方案](https://npm-kiosk.remotion.dev/)
- [Lightning CSS访问者API](https://twitter.com/devongovett/status/1610683620255043591)

---

## 🤭 趣味分享 {#fun}

[![趣味图片](/emails/issues/131/meme.jpg)](https://twitter.com/t3dotgg/status/1614125827054260224)