---
slug: /120
title: "This Week In React #120: use RFC, Sandpack, Progressive enhancement, Streaming, Storybook, React-Native, Codeflow, Fontaine, Unplugin, Node.js 19, TypeRunner..."
authors: [slorber]
date: 10-18-2022
---

大家好！

本期通讯稍晚发布：新发布的React RFC让我研读了许久😄 Kent C. Dodds的文章也相当长但值得一读。两周内已有两篇重点介绍Sandpack的文章，这很值得关注！

React Native核心进展同样顺利，新开放的讨论增多。我们甚至可以预见，在完成新架构迁移并稳定公共API后，可能会发布1.0版本？尽管实际意义不大，但有些人显然非常重视主版本号的发布。

前端生态系统也有不少值得关注的新动态。我对Codeflow、Fontaine和Unplugin特别感兴趣，它们可能直接适用于Docusaurus。

说到Docusaurus，我受邀在[Changelog JS Party播客](https://changelog.com/jsparty/247)中进行了分享。

<!-- truncate -->

**💡 [在Twitter查看本期通讯](https://slo.im/thread) - 可视化格式 🎨**

---

import Support from "@site/newsletter/_support.mdx";

<Support />

---

## 💸 赞助 {#sponsor1}

[![Sizzy - 专为开发者打造的浏览器](/emails/issues/120/sizzy.jpg)](https://sizzy.co/?utm_campaign=newsletter&utm_source=thisweekinreact)

为何其他行业的专业人士都有专属工具，而Web开发者却仍在使用祖母在亚马逊购物时的浏览器？

如果你在除Sizzy外的任何浏览器中打开localhost:3000，就是在浪费宝贵的时间。

**使用Sizzy前：** Web开发令人焦虑，响应式设计困难重重，标签页和应用窗口泛滥成灾。

**使用Sizzy后：** 所需工具尽在一处，响应式设计轻松实现，无需再切换上下文。

您可[在此下载](https://sizzy.co/?utm_campaign=newsletter&utm_source=thisweekinreact)，享受14天免费试用！

---

## ⚛️ React {#react}

**[React RFC：对Promise和async/await的一流支持](https://github.com/reactjs/rfcs/pull/229)**

React团队决定回归`async/await`模型以简化服务端组件的使用。问题在于：客户端组件难以支持`async/await`。因此他们提议在客户端引入`use(promise)` API。与其他钩子不同，`use`可被条件调用。未来它还可用于其他"可用对象"如React上下文（实际上您已能[条件调用`useContext`！](https://twitter.com/acdlite/status/1581401077915975680)）。采用不同API也可视为特性：它能清晰区分服务端组件与客户端组件。

该RFC引发了激烈讨论。我们关注数据获取库的整合方式。生成器似乎适用于此场景，但实际使用困难。我们期待引入缓存API的新RFC。

**[网络的下一场变革](https://www.epicweb.dev/the-webs-next-transition)**

Kent C. Dodds 对三大主流 Web 架构进行了精彩的回顾，内容图文并茂且文档详尽。他重点介绍了最新的架构趋势：渐进增强型单页应用（Progressively Enhanced Single-Page-Application）。Remix 是该架构的实现典范，其精心设计的抽象层鼓励模拟浏览器原生行为。不过我个人并不完全认同服务器绝对必要的观点。[Docusaurus](https://github.com/facebook/docusaurus) 同样是 PESPA 的优秀实践，在无 JavaScript 环境下也能完美运行。

**[使用 Sandpack 打造世界级代码游乐场](https://www.joshwcomeau.com/react/next-level-playground/)**

Josh Comeau 高度评价了 [Sandpack](https://github.com/codesandbox/sandpack) —— 他用于创建交互式代码游乐场的 CodeSandbox 工具包。该工具看起来简单易用且极具灵活性！

- 📜 [流式传输：值得吗？](https://www.builder.io/blog/streaming-is-it-worth-it)：Qwik、Solid 和 Marko 的作者们解释了流式传输的优势，以及为什么采用这种技术很困难。在 React 环境中，所使用的库（如 Helmet、CSS-in-JS、Redux 等）必须兼容才能有效实现流式传输。
- 📜 [Storybook - 一流的 Vite 支持](https://storybook.js.org/blog/first-class-vite-support-in-storybook/)：7.0 版本即将进入测试阶段：无需配置即可支持 Vite、预打包、不再需要 Webpack、支持 Vue 2、Lit 和 Svelte 等新技术...
- 📜 [从 React 迁移到 htmx](https://htmx.org/essays/a-real-world-react-to-htmx-port/)：关于从 React 成功迁移到 [htmx](https://htmx.org/) 的经验分享（文章 + 视频）。这是在 Python 后端环境中的案例，若在 JavaScript 全栈开发环境中，他们的结论可能会有所不同。完成概念验证的 JS 开发者随后失业了 😅。
- 📜 [内容优先于组件](https://www.simeongriggs.dev/components-considered-harmful-for-content)：从设计师、开发者和内容作者（CMS）不同视角探讨 React 组件设计的独到见解。
- 📜 [React 组件中的 HTML 语义小技巧](https://queen.raae.codes/emails/2022-10-10-semantic-react/)：讲解如何通过 props 传递要创建的 DOM 元素来遵循 HTML 语义规范。
- 📜 [在 Next（或任何 SSR 框架）中使用 Web 组件](https://css-tricks.com/using-web-components-with-next-or-any-ssr-framework/)
- 📜 [探索 React 中虚拟 DOM 的实现原理](https://indepth.dev/posts/1501/exploring-how-virtual-dom-is-implemented-in-react)
- 📜 [在 Remix 中懒加载 React 组件](https://sergiodxa.com/articles/lazy-load-react-components-in-remix)
- 🐦 [React 技巧：isFocused 几乎永远不应作为 prop](https://twitter.com/DavidKPiano/status/1580179833052876800)
- 🚧 [Preact 的流式 SSR 原型](https://twitter.com/marvinhagemeist/status/1581762567328104448)
- 🧑‍🎓 [使用 Spline 和 React 创建带游戏控制的 3D 网站](https://designcode.io/spline2) ([视频](https://www.youtube.com/watch?v=uYp_ipIasYE))
- 🎨 [Satori + React-Three-Fiber 演示](https://twitter.com/0xca0a/status/1581751380339232768)
- 🎨 [Satori + SVG 代码语法高亮演示](https://twitter.com/shuding_/status/1581358324569645056)
- 🎙️ [Docusaurus 2 是个重大升级](https://changelog.com/jsparty/247)
- 🎥 [为 useEffect 辩护](https://www.youtube.com/watch?v=Zw4lJqBphvA)
- 🎥 [让 React Context 更快！](https://www.youtube.com/watch?v=ZKlXqrcBx88)
- 📦 [Planby - 基于 React.js 的日程和时间线组件](https://planby.netlify.app/)
- 📦 [Gatsby v5 测试版](https://twitter.com/GatsbyJS/status/1580288285229735936)
- 📦 [Astro 1.5](https://twitter.com/astrodotbuild/status/1580611193429168129)
- 📦 [SWR 2.0 RC](https://github.com/vercel/swr/releases/tag/2.0.0-rc.0)

<SubscribeFormEmbed />

---

## 💸 赞助 {#sponsor2}

[![Chain React - 美国 React Native 会议 - 2023年5月17-19日 俄勒冈州波特兰](/emails/issues/120/chainreact.jpg)](https://cr.infinite.red/?utm_source=react_hebdo)

**[Chain React - 美国 React Native 会议 - 2023年5月17-19日 俄勒冈州波特兰](https://cr.infinite.red/?utm_source=react_hebdo)**

Chain React 即将回归，2023年5月将举办第四届年度 React Native 大会。您不容错过的最优秀的人才、公司和合作伙伴。

- **工作坊 | 2023年5月17日** - 我们为所有不同技能水平的人准备了三个激动人心的工作坊！这些独家工作坊将于5月17日在官方演讲者酒店举行。在这里，您将学习、交流并直接接触专家。
- **会议 | 2023年5月18-19日** - 我们的主要活动！在这里，公司发布重大新闻，开发者分享秘诀，并建立终生的友谊。主会议从不进行直播。

---

## 📱 React-Native {#react-native}

**[2022年：我们如何改进 React Native？](https://github.com/react-native-community/discussions-and-proposals/discussions/528)**

React Native 团队希望就 React Native 中需要改进的地方获得反馈。提到的一些要点包括：CSS 支持（Yoga、间隙、网格、阴影等）、跨平台支持、版本升级、调试、键盘、Metro 符号链接...

- 💬 [重构 React Native 的公共 API](https://github.com/react-native-community/discussions-and-proposals/discussions/523)
- 📜 [使用 Yarn Workspaces 设置 React Native Monorepo](https://www.callstack.com/blog/setting-up-react-native-monorepo-with-yarn-workspaces)
- 📜 [在 Re.Pack 3 中使用模块联邦](https://www.callstack.com/blog/module-federation-with-re-pack-3)
- 🚧 [Expo Router 0.0.27](https://twitter.com/Baconbrix/status/1579912795323215872) + [布局 API 变更 RFC](https://twitter.com/Baconbrix/status/1582057133939384321)
- 🚧 [React-Native Bottom Sheet v5 将支持 Web](https://twitter.com/gorhom/status/1581334529121218561)
- 🚧 [React-Native Flex gap 支持即将到来？](https://twitter.com/Baconbrix/status/1580587087174062080)
- 📖 [Expo 文档改进](https://twitter.com/amanhimself/status/1580615698321399811)："在 EAS Build 上运行 E2E 测试现已在 Android 上可用"
- 📦 [Metro 0.73.0](https://github.com/facebook/metro/releases/tag/v0.73.0)
- 📦 [React-Native 0.70.3](https://twitter.com/Kelset/status/1580210635266084864)
- 🎥 [在 React-Native Re-Animated 2 中实现翻转卡片动画](https://www.youtube.com/watch?v=nVsvcu93488)
- 🎙️ [React-Native-Radio 第248期 - 介绍 Ignite v8：Maverick！](https://reactnativeradio.com/episodes/rnr-248-introducing-ignite-v8-maverick)

---

## 🧑‍💻 工作 {#jobs}

🧑‍💼 [**Causal 公司产品工程师，远程/伦敦/纽约，$150-250k**](https://jobs.lever.co/causal-app/4acaafbe-ef3d-45a6-bbe6-687c022d727c?lever-origin=applied&lever-source%5B%5D=thisweekinreact.com)

Causal 是一家 A 轮初创公司（由 Coatue/Accel 支持），正在构建一个用于处理数字和可视化数据的一体化工具。我们正在寻找能够解决困难的 UX/性能 问题的强大 React 工程师。

🧑‍💼 [**G2i - 100% 远程 React Native 工作**](https://twitter.com/gabe_g2i/status/1563204813881425926?s=20&t=ArRLC77BpRwXXCdx8fnUqw)

我们开放多个专注于React Native的开发职位！薪资约16万美元外加10%奖金。应聘者需具备RN实际项目经验且位于美国境内。私信[@gabe_g2i](https://twitter.com/gabe_g2i)了解详情，并请提及"React本周动态"。

💡 [如何发布招聘信息？](https://thisweekinreact.com/sponsor)

---

## 🔀 其他 {#other}

**[StackBlitz Codeflow](https://stackblitz.com/codeflow)**

StackBlitz的[WebContainers](https://blog.stackblitz.com/posts/introducing-webcontainers/)技术通过WebAssembly实现在浏览器中运行Node.js。您可以直接在浏览器中运行VS Code、Next.js或Docusaurus，无需远程Docker容器。Codeflow增加了与GitHub的深度集成层，能安全地本地运行拉取请求进行审阅或编辑——这对开源项目极具价值。

他们还推出了Web Publisher——针对Markdown文件的简化编辑视图（含编辑器、预览窗和保存按钮）。即使技术能力较弱的用户也能便捷参与Git文档协作，提供真实内容预览（而非GitHub简陋的Markdown预览）。这正是[Docusaurus用户的核心需求](https://twitter.com/ericsimons40/status/1580371754974781440)。

**[Fontaine - 基于字体指标的自动备用字体方案](https://github.com/unjs/fontaine)**

该方案能避免加载自定义字体时的布局偏移问题。通过使备用字体尺寸与目标字体完全匹配，确保文本容器平稳过渡且不受尺寸影响。精妙的设计！

- [Node.js 19](https://twitter.com/nodejs/status/1582401871179747329)
- [Node 18.11](https://nodejs.org/en/blog/release/v18.11.0/)：新增了 `--watch` 模式以及[其他很酷的功能](https://twitter.com/matteocollina/status/1580911016506163202)
- [Unplugin - 统一的插件系统，适用于 Vite、Rollup、Webpack 等](https://github.com/unjs/unplugin)：用于创建可在所有打包器上运行的通用插件！
- [CSS - 帮助选择嵌套语法 - 调查结果](https://developer.chrome.com/blog/help-css-nesting-results/)
- [我的 tsc 移植项目状态更新](https://kdy1.dev/posts/2022/10/tsc-port-status) + [Speedy TypeScript 类型检查器公共仓库](https://twitter.com/kdy1dev/status/1582174891230760960)
- [TypeRunner - 高性能 TypeScript 编译器](https://github.com/marcj/TypeRunner)
- [Lerna 重生 — v6 有哪些新特性？](https://blog.nrwl.io/lerna-reborn-whats-new-in-v6-10aec6e9091c)
- [Nx 15 有哪些新功能？](https://blog.nrwl.io/whats-new-in-nx-15-7e14e1ff282d)
- [JetBrains Fleet - 公开预览版](https://blog.jetbrains.com/fleet/2022/10/introducing-the-fleet-public-preview/)
- [Import maps 即将在所有浏览器中可用](https://twitter.com/sebastienlorber/status/1582024272788480000)
- [Bun 在 ViteConf 的演讲](https://twitter.com/jarredsumner/status/1581427214691708929)
- [rRPC-chrome - Web 扩展的 tRPC 适配器](https://github.com/jlalmes/trpc-chrome)
- [什么是 pnpm？它真的如此快速和节省空间吗？](https://dev.to/stackblitz/what-is-pnpm-and-is-it-really-so-fast-and-space-efficient-29la)
- [Intl Explorer - 用于实验和尝试 ECMAScript 国际化 API 的工具](https://www.intl-explorer.com/)
- [2022 年我们为何选择 Babylon.js 而非 Three.js](https://www.spotvirtual.com/blog/why-we-use-babylonjs-instead-of-threejs-in-2022)
- [Vite 的诞生历程 - ViteConf 2022 幻灯片](https://docs.google.com/presentation/d/1O09rAOu_wRLHVjukVbBeSlRkLeX-dcYZfsdjPiU4kGQ/edit#slide=id.p)
- [Rollup v3](https://github.com/rollup/rollup/releases/tag/v3.0.0)
- [Jest 29.2](https://github.com/facebook/jest/releases/tag/v29.2.0)
- [Obsidian 1.0](https://obsidian.md/1.0)

---

## 🤭 趣闻 {#fun}

[![梗图 - 当 ESLint 规则是警告而非错误时：哦不，无所谓（没人在乎）](/emails/issues/120/meme.png)](https://twitter.com/markdalgleish/status/1580827326799310848)